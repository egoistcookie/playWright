# 有道云笔记 - 日记内容汇总

导出时间: 2025-10-25 22:53:33

导出条目数: 61

==================================

###标题###[管理知识] [最后修改时间20250821] 

《微信轻阅读-为什么不干活的人收入越高？》

阿里总裁说：“整个阿里只生产一种产品，那就是干部，依靠干部，阿里突破成长的自然效率。”何谓自然效率，打个比，十个人去种树，没有组织的话各干各的，有人挖坑、有人种树、有人埋土、有人浇水，干完一个步骤就要等下一个步骤的人来处理，比如种了树，要等人来埋土，要一直扶着树，人力就被搁置在那里。但如果来了一个管理者，来了一拍手，大家都听我的，这三个人去挖坑，这三个人去种树，埋土比较简单，两个人就好，剩下两个人专门浇水。然后制定个计划，挖坑的，今天挖多少个坑就好，种树的今天种多少棵树就好，每天调整计划，把人力资源最大的利用起来。那么可能没有人管理的时候他们一天只能种二十棵树，这个就是自然效率，有了管理之后一天就可以种八十棵树，这就是管理效率，管理者的价值=团队能力*（管理效率-自然效率）。

管理者的价值在于设计流程和制定计划，还有及时沟通，把所有人的工作效率综合起来，实现 1+1＞2 的效果，所以看起来不干活的人收入就越高，实际上不是他们不干活，而是这些活在项目开始前就已经做了，平常看起来只是聊聊天画画图，其实这些就是管理者的工作，只是看起来轻松而已，实际含金量，要比直接下场干活高得多。

###标题###[20250322 米哈游牛客] [最后修改时间20250821] 

现实：73%的员工认为“加班最多的人最先升职”，但实际晋升名单中这类人仅占12%。真正影响晋升的隐形技能中，“向上管理”权重占35%，远超“专业能力”（25%）。

真相：老板最在意的不是“你做了什么”，而是“你放大了多少价值”。同事最喜欢的不是“老好人”，而是“能帮他们节省时间的人”。

通过帮助下属/同事成功，反向证明自己的领导潜力。

案例拆解：某员工主动为新同事编写《入职避坑指南》，被总监发现后，直接任命为新人导师，次年晋升为团队主管。

操作指南：每月主动组织1次跨部门经验分享会。用ChatGPT为同事生成定制化学习清单（附教程）。

总结

高段位周报的本质是向上管理的信息武器：

把日常工作翻译成老板关心的商业语言

用数据证明你是“资源放大器”而非“成本单位”

将个人贡献与团队/公司战略捆绑

当别人还在写“做了什么”，你的周报已经在回答“为什么该给我升职加薪”——这才是职场真正的降维打击。

职场是一场关于“价值感知”的游戏——你的工资不是由付出多少汗水决定，而是由多少人觉得你“不可或缺”决定。掌握这些暗规则，你会发现自己早已甩开那些只会埋头苦干的人。

###标题###[2025年08月17日微读有感] [最后修改时间20250817] 

别只读书了，试着从书里练表达力

读书不是记笔记，是打开思维肌肉的方式。

我以前读书，很努力。

划线、摘抄、记金句，像是在做阅读理解题。

结果呢？

抄了一堆好词好句，自己开口的时候还是讲不清楚。

后来我才知道，表达力这东西，不是“积累”出来的，而是“练”出来的。

尤其是我们读书博主、内容创作者，表达力直接决定了你有没有独立观点。

所以我练了一套自己的方法，从书里提取表达力，而不是复制书的语言。

以下是我的3步训练

不是摘抄金句，是写“读后对话”

我看完一章，不会先抄内容，而是先问自己一句话：

“我同意作者说的吗？我会怎么说这件事？”

比如读《被讨厌的勇气》时，我不是记“活在当下”多重要，

我会写一段这样的内容卡片：

我以前总是回想过去的错误，或者焦虑明天的表现。但我意识到，其实我只是想控制一切，这种“担心”不过是我对未来没信心的伪装。书说‘课题分离’，我想加一句：其实是你和未来分离得太久了。

你看，不用高级词，也不用引用谁，你自己的语言就是表达力。

提炼“共感金句”，而不是“金句”

大多数摘抄，是抄下“作者写得好”的句子。

但我会提炼“我读得很有感觉”的部分，把它写成我自己的语言。

原句：你不是因为优秀才被爱，而是因为你被爱才变得优秀。

我写：我终于敢不那么努力了，因为原来爱不需要我‘很棒’才能配得上。

表达力从哪里来？

不是你背了多少，而是你敢不敢说出“自己的解释”。

用“替代说法”练转述

这一步是我提升最快的一步。

我会刻意训练自己用两种方式重说作者的一句话。

比如：

作者说：我们无法控制他人，但可以选择如何回应他人。

我就写两个版本

情绪化版本：对方烂不烂不是我能决定的，但我可以不陪他一起烂。

温柔版：我们不需要成为对方的情绪容器，而是自己的温度调节器。

你会发现，当你能说出好几种不同版本的意思时，

你对这个观点就真正“拥有”了。

我一直觉得，会表达的人，不一定读书多，但一定会内化。

真正的表达力，不是你说了多少句金句，

而是你能不能讲出一句“别人听懂、你自己认同”的话。

别再抄句子啦，

开始试着用自己的语言，重新长出你对世界的感受。

收藏这套方法，试着在下一本书里实践起来：

写“我会怎么说这件事”

把触动你的句子，改写成你自己的话

用不同语气，转述作者观点

你最近在读哪本书？哪一句话特别触动你？

欢迎来到「知识土匪」：

知识土匪主要是通过读书营的形式，聚焦于知识变现和财商类搞钱类书籍，帮助成员将阅读的知识转化为个人成长和财商提升的工具。

我们始终认为：一本书不只是知识，更是你赚钱和表达的工具

我们不是那种安安静静看完书、写完摘抄就结束的读书社群。

在知识土匪，每一本书，都要拆、要聊、要用。

要用到什么程度？用到让你会说、敢写、能赚钱。

我们相信： 学会的，就是我的；看懂了，就直接用。 读书不只是增长见识，而是提升表达力、理解力、行动力。 知识不是等到“哪天有用”，它今天就能用。

by 【读书土匪】广告-小维

###标题###[2025-tfb-数据库表] [最后修改时间20250813] 

柜员-岗位-角色-产品-菜单的关联关系：8 张表

select from WF_DUTY wd WHERE staffid IN (select STAFFID from WE STselect * from wfposition where positionname like '%单证审核岗%;

wf_position

ip_arc_grant

wf_role

WF_STAFF

ip_res_product

ip_res_relation

ip_res_menu

25 个交易都没被屏蔽。

25 个交易都配置了正常状态的有权限柜员。

###标题###[2025年07月21日 056 发报未回执] [最后修改时间20250721] 

071823 点手工编辑 056 止付电，已发送但一直未回执，072108 来看，已经变成修改队列，回执电在哪里？

没有搜到回执电 camt 029，in 表里只有一笔 0721 早上发的 056 的回执电：

0718 的队列在 mdw0199，最后更新时间是 0721084412？

###标题###[20250715 资治通鉴] [最后修改时间20250718] 

五代十国

后梁

第一任后梁主，朱温，改名为朱全忠，最后篡了唐，真是讽刺。

朱全忠与后晋的李克用结下世仇，世世代代敌对，起源是？

后梁主为人温和恭敬，并且简朴，没有荒淫方面的过失，只是特别宠爱和相信赵岩、张汉杰，是他们独断专行，作威作福，后梁主疏远了敬享、李振等旧臣，不听他们的意见，最终导致灭亡。

谏臣的重要性，慧眼识人的重要性。

后唐

李克用儿子李存勖完成遗命，百战灭梁。

可惜重用伶人，以至于被称为伶神的地步。傲慢自大，是宣称是靠自己的十个指头赢得了天下，建国后甚至克扣军饷充入后宫。逼反养子李嗣源，御驾亲征却大军溃败，最后被伶人乱箭射伤，被叛军砍了脑袋，四十一岁英年早逝，可悲。

###标题###[20250714 购汇分润] [最后修改时间20250714] 

测试环境，六类收费标准：

###标题###[20250711 分润案例评审会(2025-7-11)] [最后修改时间20250711] 

19 楼会议室二：

支行维护客户，总行审批

锁汇不包含柜面，启坤：客户在柜面只会做结售汇不会做

王聪：汇率波动变快，国结同步时间需要缩短，网银查询汇率也需要提交前确认汇率。育妍：点下一步时再查询汇率，就会锁定。

企业网银：客户看不到自己是否为分润。

大总账：不涉票流水：核心批处理给的，不会开票。

大总账：涉票流水：正数记账负数写文件？大总账页面能查，增值税系统开票。（购汇返还不用开票）

柜面发起和个人网银发起：即使分润客户也不要走新记账接口？生成分录的位置会触发吗？

为什么要定五点锁汇：企业网银是五点之后就不让使用了。

汇出汇款：前端发起，隔日经办：取实时汇率。

柜面发起：销户后可以用业务编号在国结汇兑交易第三个页签使用。对公客户还留了一个口子？

关注点：

交易页面展示要素

记账分录在核心大总账的显示

交易回单情况

回单附言最大值测试

自测问题是否在测试范围内

特殊场景：最低收费和最高收费场景测试：费率收费才有

特殊场景：后手交易才维护分润场景

分润和锁汇需求是否同时测试？

###标题###[20250509 三代柜面前端开发培训] [最后修改时间20250613] 

20250506开始准备、202508补充+标注重点和展示项目、

一、主题介绍：针对新人做的前端开发培训，其实都是有二代基础、很多年二代开发经验的前端大佬。

准备文档：架构图文档、开发手册、开发规范导图、洞见《三代柜面任务》、CODING目录结构、agreeStudio展示某交易vue内容、afa展示组合服务等、jar 工具-哪个端口？

二、架构介绍：文档位置忘记，问下hx、lrx（初始展示界面：架构图）

客户端（C端）：eclipse OSGI+内嵌谷歌浏览器+vue2.4，跟二代不一样，三代柜面的前端不是网页，它本质上是一个eclipse应用；这个eclipse应用有很多插件，都是OSGI的一个个bundle插件，比如和服务端通讯的插件、Excel转pdf的插件、log4j的插件，我们只需要关注它内嵌浏览器用到的这些前端vue文件js文件就好了；

服务端（AB端）：spring boot的后台应用，采用微服务架构，abs负责与前端通讯和转发前端请求，afa负责数据库的增删改查和与外围系统通讯，各自部署了很多个应用，分散在各个服务器上，日志看起来会比较麻烦，不过后面引入了sls平台来集合所有服务器的日志，方便了些；

三、前端开发流程和开发规范：（切换界面：开发手册和开发规范和coding）

搭建本地环境 ，参考最新版前端开发手册，50m那个文档；注意事项：分支是master ，agreeStudio的工作空间也设置在TEClient的外层；（展示coding）

分配需求变更后，开发时，要从master 分支上拉取需求分支；展示洞见《三代柜面任务》，任务状态要更新成开发中；

本地开发完，上传代码到远程分支，提合并请求到deposit-uat；审核人为各自组长，比如存款组需求变更就是zsh和hb；贷款是wzy；公共是dxl；（切到coding）

提完代码，记得更新洞见的共享文档，《三代柜面任务》，状态从开发中更新成已提uat；（切到洞见）

配合测试测完uat3后，测试组长会通知测管组，测管组确定上线日期后，会通知我们这边版本负责人，负责人会在群里艾特你，让你提需求分支到release-YYYYMMDD的合并请求；审核人为各自组长。《三代柜面任务》的状态一般由组长和负责人更新；

另外要注意的是，sql的仓库另外有一个，需要从SQL仓库的deposit-uat拉取（展示coding对应目录结构）需求分支，然后在需求对应月份下创建需求子文件夹；

然后确定上线日期后，在月份文件夹同级目录下创建对应日期目录，在日期目录下再建需求文件夹，会稍微复杂点；

开发规范：思维导图，结合其他交易代码。（切到思维导图）

四、前端开发注意事项：C端开发为主，服务端只要会查错就好；（切换界面：agreeStudio和afa）

交易流程介绍：交易分为对内和对客交易，两个页签分开，以一个对客交易为例子（agreeStudio展示1002.vue内容），交易流程包含初始化、变量有sdm和dm和data三种集合容器的区别-生命位置不一样，以后统一用dm、各种栏位域后事件、提交前检查方法（开发规范展示各类方法）、提交方法、提交后处理等等，控制流程的文件是trade-impl.ts；

前端调用各种后台api的方式：DBComm-通过afa操作数据库，ESMPComm-通过afa调用微服务接口、xxx-调用OSGI或者abs插件、简单介绍DBComm和ESMPComm的调用链路，打开afa展示：1002开户组合服务、DBComm操作数据库等；

几个需求改动比较频繁的位置：

交易流程控制调整：增加提交前判断、增加接口调用、

联网核查规则调整：公共页面，交易传参控制流程，与二代差异：二代本人和代办的核查好像是分开的，（控制是核查本人还是代办人、控制代办人类型、控制提交时校验的证件是本人还是代办）、

打印细节调整：aft文件编辑（agreeStudio展示aft编辑与部署）、、

授权规则调整：几张表控制授权、提交sql注意事项、授权规则配置与二代差异（不是在公共部分给授权条件赋值，而是在各自交易代码中）（C端-lt3-6015展示，然后ob展示导出sql，提版还是要sql）

五、开发自测技巧：（切换界面：C端、ob、sofa、sls）

开发模式：

本地连uat3环境，关闭更新资源开关、编译本地文件、（展示C端配置文件aui.properties）

本地连lt3环境、编译本地文件到lt3，但是接口经常卡死，比如核心同事连到本地、短信平台也经常调不通、abs/afa后台服务有人改了也会不通；如果要测后端开发的东西可以用这种模式；

打印机外设的配置（通过ads连接远程客户端的打印机）（展示C端配置打印）、外设挡板使用方法：jar工具展示：1014选择存款、但是打印机挡板没用；

谷歌断点调试前端：（展示C端跳过1013手输账号）、修改状态、跳过校验、、

几个常用的辅助交易：6126尾箱查询、6107领用、凭证维护查询、

查错技巧：

通过几张表找自测数据：ob展示：找有权限的未登录柜员、

几张常用交易信息表的关系：ob展示：找交易发出的报文-比如短信、各类接口、

客户端的日志（通过快捷键打开某交易，可以获取在线柜员的客户端日志，对排查问题很有用）、

sofa的日志（sofa和sls展示）（日志的配置在log4j的地址）、组合服务的调用情况-结合客户端日志反推柜员操作、

sls的使用、

迭代：

准备 0618 培训

一些启发：

关键源代码可以贴图到 PPT 或者 word

新建一个交易可以作为展示页

授权规则可以作为一个展示页：几张表如何关联：三个 id 与生产对比方可上线。

0613 参加 abc客户端培训：

aarm 更新插件资源：

生产上问题：郑乾宏：如果本地版本号大于服务器版本号，就不会更新资源，跟赞同培训有出入。但是展示代码是版本号相同才会比较 md5 值。（ClientUpdateScheduler)(client.update)

p2p 下载原理：彬少：广播有问题，代码位置“启动 p2p 服务完成”P2Pprereq启动了两个 server 端监听，第一个是检查插件下载列表，第二个是更新文件。实现原理？怎么判断需要更新资源？是别的客户端更新了资源之后同步广播其他客户端？先从服务器拉 grm 的文件列表，再从其他客户端拉取最新的文件？

aarm 更新前端资源：syncGRM，存的是文件的 md5 值，earlyDownResource 变量控制信创和非信创，为什么要区分？赞同回复：信创做不到实时加载，只能启动时一次性加载。

日志上传：客户端日志上传服务端，方便排查问题。default.properties “旁路日志上传”

启动配置

外设挡板：挡板文件放在 ads_mock 目录下，adsmockserver.java 实现。

插件开发：

MANIFEST.MF 中配置。前端调用，后端配置拓展点。开发后用 eclipse 打包插件，放在本地 plugins 目录下即可测试。

###标题###[PAMS笔记] [最后修改时间20250607] 

一、启动问题：

目录结构：

/pmts/pamsagt/cfg/ 配置文件目录

common.err

pamsdef.dat

pams.err

syscfg.ini

/pmts/pamsagt/log/YYYYMMDD/ 日志文件目录

PamsOprRptSvr.log

PamsCfgProcsvr.log

PamsRTmMonSvr.log

PamsTimerSvrim.log

PamsNetcomgvr.log

PamsCfqProcSvr1.log

PamsFileProcSvr3.log

PamsCmdProcSvr3.log

INTERFACE.log

console

PamswatchDog.log

启动指令：

pamsstat -s

启动报错：

观澜服务器-20250606晚：

Q：pamsstat -s 报错：代理启动成功，启动(AMCPI]插件：节点管理服务不存在，无法启动插件! 接件[AMCPI]启动失败，诸检查原因并手工启动

日志显示：检查节点管理器是否已启动... /r/n Level4 PamsNodeMgr：节点管理器启动检查失败，程序退出！

A：中心老师解答：少执行了sqlite.sql

###标题###[2025年06月05日-导出申报数据卡死] [最后修改时间20250605] 

早上八点五十四导出，只一行日志

cpu 内存凸涨：

测试环境增加日志：

初步判断是 jxl2.4 生成多页签 Excel 效率太低

ai 修改方法，优化性能：

不降反升，没什么用。

去掉修改列宽逻辑，依然没什么用。

虽然亚歌姐反馈现在都是通过报表平台导数，这个功能没什么用了。但还是要确认是否需要优化。以及为什么要旧事重提。

后续优化思路：

改为批处理生成文件：

改为 poi3.9 生成文件：

屏蔽该功能（现在已改为只有 00822 可以导出）

###标题###[2025年05月21日-柜面定制存款维护] [最后修改时间20250521] 

先看 maintaintype 是否为 0 编号利率维护或者 1 综合额度维护，两者子页面不一样，查询接口也不一致，1 也不查有数平台

0 时，也可以不查询，直接新增利率类型

0时新增，对公客户时，有数平台编号必填，填后调fixedTermDepositParamTableInfoQuery 接口，查有数平台定期存款定制参数表信息，到期利率为 EXPIRY_RATIO，逾期利率为 OVERDUE_RATIO。

提交前方法：以录取数据与有数平台返回数据做对比，若不同则将所有不同字段并到提示信息中，且加载到授权规则的动态授权原因中。

生产数据：两个逾期利率对不上，有数平台为 0，录入也 0.1

###标题###[2025年05月14日三代工单 1139 机构为空] [最后修改时间20250514] 

根据全局流水找到 TELLER 开头的编号 找到 js-trade.js：

00603 的 6040 柜员 选择了 00197 的账号，点了>>按钮 点了文件申请按钮 获取机构号为 undefined  提示报错 点了确定按钮 提示"该账户不允许打印，请提醒客户到开户行相同法人机构下办理。"

###标题###[2025年04月15日福费廷放款失败] [最后修改时间20250415] 

福费廷起息报错：开立机构不能为空

同名 cms.cfg.xml 导致：

###标题###[2025年04月07日验签失败] [最后修改时间20250414] 

报错原图：

先看是哪里报的验签失败：有两处可能

观察日志，是 MsgOutInterceptor 报错

验签失败的，就不会截断签名域，就会在转换国结格式报文时报错，

看配置文件，用的是什么配置项，签名域有多长？测试环境配的是 128，如果固定减去 128 再转换为内部格式报文，可能就把后缀剪掉了。

每一笔报文的签名域都固定是 128 位吗？

没直接打印内容：

验签逻辑：

配置文件中的配置项：

生产端规律：

esb规范：八位长度位 报文体 128签名域，为什么签名域有长有短？国结根据 utf8 转换的，签名域看起来都是乱码，验签失败的

0408:发现找错了实现类：

实现类从 workflow.xml 开始找，为：

根据 service 标签判定为结束。而签名域更在 service 之后。

0409:玉成提了需求：XQ-2025-04-09-003

0411:卡在玲姐

需要给测试范围，是否需要测试？只测一个汇出汇款和汇入汇款就可以了？

0414:

赵总修改意见：

读取前八位用 new string（buffer，0，8），

去掉原来标签判断，

while continue 改成 while break，

用 demo 去测试，

input 流未关闭，找下在哪里关的，只关了 socket，可能有资源未释放风险，增加 input 关闭。

###标题###[2025年04月13日柜面巡检] [最后修改时间20250413] 

八点半开门前巡检：

oss 桶：

###标题###[2025年04月11日外卡对账] [最后修改时间20250412] 

外卡记账，比如 pos 机，visa 清算后，同业账会上有明细，会推给国结

0411:外卡记账，vista 和 master 账务，参考号都为 DRAWDOWN。对方行有明细，核心无明细：

原因：核心查询推送明细 SQL 有误：只筛选了 TF 来源的明细，

不只是外卡，TELLER3和TE支付的渠道记账都没送来，（999的大额调拨都是通过柜面）

邹秋提工单，尾号：822656

0412:上午补明细，核心给0403-0411 的明细，实际只有 0407-0411 的。

维护参考：0c6d

0412:下午测试工单，visa 账务

通过 6267 调账：借同业贷 Visa

3403-大额扣划：支付造来账，入账选同业：

核心生成文件推送到国结：

二代明细文件最后一位有空格，三代没有：

黄嘉明改：

###标题###[2025年04月08日对账单问题] [最后修改时间20250411] 

人工核对明细：

账户行余额：stmt表最新一条记录的余额

我行已记，账户行未记：transfer 表记录

我行余额：transfer 表余额

账户行已记，我行未记：stmt_dtl 表记录

账户行调整后余额应等于我行调整后余额。

不等于即对账不平。

三代上线后问题：14 个账户行对账不平，南洋美元：

余额怎么来 余额文件的最后一个字段

二代给的文件里的余额是当日(t-1)日终余额：

三代变成了上一日（t-2)的日终余额：

钟晓栋解答：倒数两个余额字段的顺序颠倒了，

0410:三井住友 日元

0408 发生了几笔记账，倒数第二个余额更新，倒数第一个余额未更新，明细入表，余额为未更新的上上日余额

0409 未发生记账，最后一个余额字段没更新。

0411:维护参考：

###标题###[2025年04月11日 cips 分报非阻塞报错] [最后修改时间20250411] 

需要对比一下两种响应报文的返回体，和国结的代码：

###标题###[2025年04月09日冻结解冻] [最后修改时间20250410] 

登记发起冻结：

代码：

核心返回成功报文，根据账号累计冻结限制序号：

汇出汇款查询是否有冻结 和 冻结金额

冻结金额：

0410 报错：限制信息不存在。

汇出汇款解冻失败，测试反馈：第一次提交提示余额不足，存钱了之后再提交，提示限制信息已失效或不存在。

检查 tfb pub freeze 表里是否有记录

检查 gateway 是否有验签失败记录

是否能对应上？

原因：核心返回了空数组，微服务把空数组里每个域都转成了空标签，国结取了返回报文的限制编号来更新限制信息...

国结收到的：

核心返回的：

二代 uat 的国结收到的情况：

最后方案：核心没问题，微服务不可能改，国结改更新逻辑，改为取请求报文里的，或者直接取上送的。

让鑫城提的工单，最后砸到了自己脚上。。

###标题###[20230716 开发笔记] [最后修改时间20250227] 

申报问题：

1、客户查询根据账户号？需要申报人、申报人电话信息。

2、对私查询如果查不到则手输。

3、管理信息勾选完全录入时校验管理信息必输项。

4、手工录入申报信息时收款人名称不能联动收款人账号，但汇款页面可以

5、收款人名称为什么可以输入中文？

6、综合前端先提交申报信息，再提交汇款信息。

软需问题：

1、现国结系统的汇款申报完整业务流程？是否需要到申报平台的接口？需要，记账后申报数据形成文件送到申报平台，隔日报送到外管局，或者隔三日。

2、手续费是否需要逐个交易列出？

3、2.1功能结构是否需要补充其他流程图？软件功能点清单（接口）？需要但不重要

4、申报信息现在不打包改转发？是，转发到各自的报送平台

5、同业福费廷加在福费廷菜单下还是与福费廷菜单同级？放在福费廷菜单下

6、增加接口清单项：核心接口直接复制来、信贷接口对照信贷接口说明书、ECIF及综合前端接口待确认

综合前端接口：

1、综合前端报送、返回报文头标准格式？

2、接口英文名称自定义？

3、汇款的交易代码？

工作流：

项目初始化时启动线程类Scheduler，间隔时间为300L（毫秒），扫描nodeQueueLocal里节点，依次执行节点Action。

各业务流程都会新增节点，节点信息存储在wf_NodeQueueInfo表。

工作流调用数据迁移：

Scheduler -> ExecutorBean -> EventNode ->  CallBusinessAction -> SendMessage -> ProcessFinishMessageEJB

工作流调用记账接口：

查询wf_NodeQueueInfo表获取任务nodeobject字段内的NextNodeId值，根据该id值查询wf_NodeInfo表获取对应的Action并执行。

SendAccountMessageEJB

/*工作流节点队列表*/

select * from wf_NodeQueueInfo;

select * from wf_rt_NodeInfo where processid = '-1' and nodeid='4';

经办时通过wf_NodeInfo节点内Action方法在wf_TaskInfo表新增记录，使其得以在任务列表显示；复核时获取wf_TaskInfo表任务修改其ExecutorId、完成时间、任务状态字段以及任务操作人的间隔符（由‘，’号改成‘；’号）。

汇出汇款跳过工作流处理：

汇款业务信息直接插入汇出汇款info表与公共交易info表，汇路选择业务信息则插入公共交易tmp表。汇路选择依然走工作流，任务表的taskcomment权限列表根据公共交易表的执行机构号查询。

Core项目新增noWorkFlow方法，web项目编译调用失败。

已开发到形成汇路选择任务，后续需增加核心记账接口的调用，以及打回后的处理。

暂停同步开发，继续异步开发，已开发到记账，需反馈给柜台存入临时表的结果。

SVN版本差异：

ebills.core项目：

1、LaunchMode.java、ImpCommonsDAO.java新增柜面发起方式

2、核心记账返回信息截取位数有变（以前不能小于142，现在不能小于45位）

3、修改调用核心socket服务方法

4、核心记账返回结果不再由Ascii转成中文字符串

5、发标融资冲帐新增三种选择方式

6、修改各融资业务的信贷出账信息逻辑处理顺序

7、出口收汇数据迁移

ebills.web项目：

1、融资业务js新增判断：20160909复核或授权需与经办在同一天进行

2、参数管理客户信息新增：组织机构代码（单位代码）必须为9位或18位

3、commons.js黑名单判断跳过；

4、tallyAffirm.jsp：改为允许记账通过

5、申报各业务界面组织机构代码长度限制改为18位（之前9位）

6、DocCollRecvHandle.jsp、LcSettleHandle.jsp

7、LCAmendHandle.jsp：修改最大开证金额

8、修正注释

9、汇出汇款js屏蔽黑名单判断

10、菜单屏蔽汇入修改交易

11、InitServlet初始化增加SocketReciver线程

12、AssignSwiftAction修改SQL：NOT IN改为NOT EXISTS语法

13、新增schedule.properties、schedule-data

14、notrade.xml新增testAction

SVN 文档账号：

eternal_liufeng 密码：Qq_7816288

参数权限：

参数表：PA_PARAMORDER

参数查看权限：先查SC_PARAMUSER表获取用户各参数权限（9992111用户全权限），再根据执行机构判断：清算或单证中心几乎全参数权限，只不能查看总行牌价和管理支行牌价，其他机构隐藏七参数（在LeftTreeAction.java的startTree方法）;

参数审批全下：相同执行机构下的不同用户即可（或9992111用户）

自动任务流程（InitServlet初始化，一分钟执行一次）：

1、先查询自动任务锁定表rt_autoProcLock清理其中非当天和运行时间超时90分钟的记录；

2、再查询PA_AUTORUNTIME获取执行时间，先判断今天是否已经执行过，再判断是否已经到时；

3、若到时且还没执行过，则开始执行：先新增rt_autoProcLock表记录锁住自动任务；

4、再查BU_AUTOPROCTASK表获取自动任务，若在执行日期段内则执行；

5、查PA_AUTOPROC表获取自动处理类，调用类中autoRun方法启动对应交易的自动经办处理流程；

6、自动处理成功，新增bu_autoproctaskACK、rt_autoProc表记录，若处理失败，则新增bu_autoproctaskNck表记录；

7、若当前日期超过配置任务的的截止日期，则删除BU_AUTOPROCTASK中相应记录。

8、扫描rt_autoProc表，获取表内所有记录的流水号，根据流水号自动复核所有任务。

现有自动任务：账务报文清分

Initservlet的SwiftReciver线程：收到报文插rt_autoProc表

XML解析问题：

DOM解析XML报错：Content is not allowed in prolog:XML文件格式有误；

测试文件有两个<Struct>标签，后一个的值覆盖了前一个；

{BODY={APP_BODY={ACCT_NAME=姓名, ACCT_NO=123456}, APP_HEAD={LANG_LG=001, SND_TRS_SRL_NO=100101701010000001, REQ_TRS_CD=0001,

AUTH_INF_ND={AUTH_INF_ARY={Struct={AUTH_ORG_CD=23422, AUTH_CD=auth002, AUTH_TLR_PWD=123456, AUTH_TLR_CD=00010002}}}}}, SYS_HEAD={TRS_ORG_CD=0242455, REQ_SEC_ND_CD=00000101, TRS_TM=213030200, SRVC_CD=3001030001, SRVC_SCNS=01, SUB_TRS_SRL_NO=, REQ_CHNL_TYP_CD=20010, GLBL_SRL_NO=30010117101500000001, CMPNY_CD=5001, SND_SYS_CD=01, MAC_VAL=9EADD99F7F0B25A6, REQ_SRV_ID=, REQ_SYS_CD=01, SRVC_VRSN=, TRS_DT=20171015, REQ_TRMNL_LG=ATM, TLR_CD=350012331, MSG_TYP=00, ENC_NRM=2, DL_TM=60000, SND_SRV_ID=01, SND_TRMNL_LG=, ENC_MD=2, MAC_CHK_LG=3}}

{BODY={APP_BODY={ACCT_NAME=姓名, ACCT_NO=123456}, APP_HEAD={LANG_LG=001, SND_TRS_SRL_NO=100101701010000001, REQ_TRS_CD=010002, AUTH_INF_ND={AUTH_INF_ARY={Struct={AUTH_ORG_CD=23422, AUTH_CD=auth002, AUTH_TLR_PWD=123456, AUTH_TLR_CD=00010002}}}}}, SYS_HEAD={TRS_ORG_CD=0242455, REQ_SEC_ND_CD=00000101, TRS_TM=213030200, SRVC_CD=3001030001, SRVC_SCNS=01, REQ_CHNL_TYP_CD=20010, GLBL_SRL_NO=30010117101500000001, CMPNY_CD=5001, SND_SYS_CD=01, MAC_VAL=9EADD99F7F0B25A6, REQ_SYS_CD=01, TRS_DT=20171015, REQ_TRMNL_LG=ATM, TLR_CD=350012331, MSG_TYP=00, ENC_NRM=2, DL_TM=60000, SND_SRV_ID=01, ENC_MD=2, MAC_CHK_LG=3}}

{BODY={APP_BODY={ACCT_NAME=姓名, ACCT_NO=123456}, APP_HEAD={LANG_LG=001, SND_TRS_SRL_NO=100101701010000001, REQ_TRS_CD=010002, AUTH_INF_ND={AUTH_INF_ARY={Struct=[{AUTH_ORG_CD=23421, AUTH_CD=auth001, AUTH_TLR_PWD=123456, AUTH_TLR_CD=00010001}, {AUTH_ORG_CD=23422, AUTH_CD=auth002, AUTH_TLR_PWD=123456, AUTH_TLR_CD=00010002}, {AUTH_ORG_CD=23423, AUTH_CD=auth003, AUTH_TLR_PWD=123456, AUTH_TLR_CD=00010003}]}}}}, SYS_HEAD={TRS_ORG_CD=0242455, REQ_SEC_ND_CD=00000101, TRS_TM=213030200, SRVC_CD=3001030001, SRVC_SCNS=01, SUB_TRS_SRL_NO=, REQ_CHNL_TYP_CD=20010, GLBL_SRL_NO=30010117101500000001, CMPNY_CD=5001, SND_SYS_CD=01, MAC_VAL=9EADD99F7F0B25A6, REQ_SRV_ID=, REQ_SYS_CD=01, SRVC_VRSN=, TRS_DT=20171015, REQ_TRMNL_LG=ATM, TLR_CD=350012331, MSG_TYP=00, ENC_NRM=2, DL_TM=60000, SND_SRV_ID=01, SND_TRMNL_LG=, ENC_MD=2, MAC_CHK_LG=3}}

系统路径：

GeneralCalc.java:getEbillsHome()

综合前端报文接收线程池开发：

线程池构造方法ThreadPoolExecutor(基本线程池数量，线程池最大容量，线程池空闲时线程存活时间，时间单位，线程命名工厂，任务队列(队列的容量和类型)，线程拒绝策略(当线程数超过最大容量时的处理方式))。

Execute方法执行任务时，先判断基本线程池是否已满，已满再判断队列容量是否已满，队列未满则后面的任务排队等待，若基本线程池和队列容量都被塞满，则开启最大容量线程池模式，直到最大容量下的线程池和队列容量都被占满，再调用线程拒绝策略（默认为再多任务直接抛出异常）。

初始化时线程池内没有线程（除非调用prestartAllCoreThreads方法提前启动所有基本线程），当有任务发生后，线程池内会保持基本线程池数量的线程，但线程池内线程数达到最大容量时，不仅再多的任务会被拒绝，并且当所有任务都被处理完后，线程池内的线程会一个不剩，全被清除。

任务队列为LinkedBlockingQueue且未设置长度（默认Integer.MAX_VALUE）时为无界队列，此时线程池最大容量参数无效，队列无限长。（无界队列可能会导致服务器崩溃，有界队列则可能有信息丢失）

Netty：基于Java NIO类库的异步非堵塞通信框架，mina升级版，IO多路复用机制，系统开销小，单线程多管道处理多client请求。

Reactor单线程模型：通过Acceptor接收client的TCP连接请求消息，链路建立成功之后，通过Dispatch将相应的ByteBuffer派发到指定的Handler上进行消息解码。用户Handler能够通过NIO线程将消息发送给client。（处理速度较慢，而且性能上难以同时处理成百上千的链路）

Reactor+线程池模型：Acceptor接收到clientTCP连接请求处理完毕后（可能包括接入认证等），将新创建的SocketChannel注册到IO线程池（sub reactor线程池）的某个IO线程上，由它负责SocketChannel的读写和编解码工作。Acceptor线程池只只用于client的登陆、握手和安全认证，一旦链路建立成功，就将链路注册到后端subReactor线程池的IO线程上，由IO线程负责兴许的IO操作。

（需要client也使用NIO模型发送和接收socket）

会计分录：

从交易信息中获取第一条分录：币种；账号；账户类型；科目；机构；钞汇标志

1、根据客户号、机构、币种查询PA_ORGACCT表获取客户公司对应账号；

2、1查不到，则根据执行机构、币种查询ORGACCT表内账务类型为ZA10000145的记录；

3、形成记账分录：BuildAcctBusinessManagerEJB类generateAcctList()；

4、形成中间账：通过makeMidAccount方法查PA_ACCTROUTE获取该种交易的中间账号类型，再根据机构和中间账号类型查PA_OrgAcct表获取中间账号信息；

5、核心记账时：融资归还利息分录顺序调整。

接口开发存在问题：

接口报文业务号判断：配置一一对应关系，柜员、机构等参数也需要配置

Invalid invocation, check your deployment packaging, method=XXX：定义的EJB不在该项目内；

单证中心没有暂收账号，用总行营业部暂收账号作为自动任务第一条分录是否可行；

创建交易对象失败ORA-00001: 违反唯一约束条件 (GJYW.IND_BUTRANSAC_PNO)：

自动任务默认初始为processno为0，公共经办后会生成并更新该字段值，但如果中途流程出错，就会有一笔processno为0的记录一直存在，以致后面新增自动交易记录时都会报错。

自动任务会计分录新增时：For String ‘USD’ 报错：检查分录str格式，可能缺少‘；’分隔符

手续费科目号从何而来？？

BUILD FAILED

D:\MyWork\ebills.web_SVN\config\compile.xml:5: Compile failed; see the compiler error output for details.

：core里新增了方法或类，在web里调用这个新增的方法，但web项目里有core的jar包，jar包内并没有这个方法，因此编译报错。

配置文件：

wfconfig.properties：ASSIGNTASKMODE字段控制权限查询AssignDAO的类型

wf_rt_his_node;

重建数据库：

Shutdown normal

startup

Drop database删除数据库时listener.ora文件也被删去；

drop user gjyw cascade;级联删除用户

oracle监听目录：/u01/app/oracle/product/11.2.0/db_1/network/admin/tnsnames.ora

--查看表空间

select * from DBA_TABLESPACES(或者 select * from USER_TABLESPACES)

--创建表空间CARDRPT_DS

Create tablespace EBCDSPACE datafile 'C:\app\Administrator\product\11.2.0\dbhome_1\database\EBCDSPACE.dbf' size 500M autoextend on maxsize unlimited;

--创建用户 cardrpt

CREATE USER gjyw PROFILE "DEFAULT" IDENTIFIED BY gjyw DEFAULT TABLESPACE "EBCDSPACE"; QUOTA UNLIMITED ON "CARDRPT_DS" ACCOUNT UNLOCK;

GRANT CONNECT,resource TO gjyw

GRANT  create  ANY  LIBRARY TO cardrpt

GRANT  create  ANY  PROCEDURE TO cardrpt

GRANT  create	 ANY  SEQUENCE TO cardrpt

grant dba to cardrpt;

--directory授权

Grant read,write on directory dump_dir to cardrpt（dump_dir 需要定义）（农商默认DATA_PUMP_DIR：/u01/app/oracle/admin/test/dpdump）

--导出数据库

expdp cardrpt/cardrpt@test directory=DATA_PUMP_DIR dumpfile=cardrpt20170809.dmp content=all

--导入数据库

impdp cardrpt/cardrpt@cardrpt(不要也可以) directory=DATA_PUMP_DIR dumpfile=cardrpt20170809.dmp

提前把dmp文件放入C:\app\Administrator\admin\orcl\dpdump

impdp gjyw/gjyw dumpfile=GJYWDB20170930.DMP full=y;

startup pfile='D:\app\Administrator\admin\orcl\pfile\init.ora.1029201711344'

CREATE TABLESPACE ebills LOGGING DATAFILE 'D:\app\Administrator\oradata\orcl\ebills.dbf' SIZE 100M AUTOEXTEND ON NEXT 32M MAXSIZE 500M EXTENT MANAGEMENT LOCAL;

create temporary tablespace ebills_temp tempfile ''D:\app\Administrator\oradata\orcl \ebills_temp.dbf' size 100m autoextend on next 32m maxsize 500m extent management local;

浏览器缓存清理

缓存清理不会更新js 需要手动删除浏览器从服务器拿下来的js。

SQL脚本执行时查询语句报错：表空间拓展失败，可能是因为SQL单行长度过长。

Oracle连接指令：sqlplus / as sysdba

Oracle占用内存过高：

（1）show parameter sga; --显示内存分配情况

(2) alter system set sga_target=1024m scope=spfile;-修改target大小 //这个值必须小于等于sga_max_size ，否则库会起不来；

（2）alter system set sga_max_size=1024m scope=spfile; --修改最大占用内存的大小=

oracle:导出导入：

impdp导入时报错：

ORA-06512: 在 "SYS.UTL_FILE", line 536：

Oracle并不会真正创建文件夹，需要手动创建文件夹和日志文件。

###标题###[20180108 Java笔记] [最后修改时间20250227] 

1.一个.Java文件里可以有多个类，但只能有一个public类且名字要与文件名一致。

2.Java没有goto，作为保留字。(break和continue语句能看出其影子，嵌套循环中标签使用越多产生错误机会越多，有时限制语句能力反而能使语言特性更加有用)

3.＄和＄＄的异同:都可以作为逻辑与运算符，但＄＄有短路功能，即第一个判断未通过就不会进行第二个判断，可有效预防空指针异常（后一个判断如是运算也不会进行）。

4.如何跳出多重循环？在循环外定义标志变量累加或循环到某特定字符即break。

5.switch语句能作用在整数型和那些能隐式转换成整数型的类型（byte、short、char）及他们的包装类型上，不能作用在long、string上。

6.char类型可以存储Unicode字符集，其中包括了汉字（某些特殊汉字没有）。

7.计算2的倍乘最快方法是位运算，即2《3为将2左移三位相当于2乘以2的三次方。

8.thread类的run方法相当于直接调用run方法，而使用start方法则是创建一个线程，进而调用线程的run方法，因此在使用线程的时候一定要用start方法而不是run。(当线程类中已有start方法则会直接调用start方法)

9.关系数据库:db2、oracle、mysql,层次数据库:IMS,非关系数据库:mongoDB等。

10.守护线程最典型的例子是GC(垃圾回收器)。

11.如果int型变量i是int型的最大正值，再+1则变成负数，即可能i+1＜i。

12.接口只关心能做什么而不关心怎么做，接口方法默认是public abstract，接口类中只有常量且是定义了初值的常量，即接口中变量默认是public static final。abstract和final不能同时出现。接口和抽象类不同点:一个需实现一个是继承，前者可实现多个后者只能继承一个，前者强调特定功能的实现后者强调所属关系，前者所有方法都是抽象且实现类需要一一实现后者允许非抽象方法且不需继承类全部继承。抽象类在接口和类之间起承上启下作用。

13.Java创建对象的4种方式:new语句、反射newInstance方法、对象的clone方法、反序列化ObjectInputStream的readObject方法。前两种会显式地调用构造函数，clone方法是在内存上对已有对象的影印，readObject方法是从文件中还原类的对象，后两种都不会调用构造函数。

14.默认ArrayList的长度是10位，但new ArrayList(20)已显示指明了需要多少空间，所以一次性给了这么多空间，无需扩充。

15.构造方法(constructor)可以没有也可以有多个，类中可以有和类名同名的普通类，构造方法没有返回值。

16.volatile关键字总在多线程中，可保证读取的可见性(当被volatile修饰的变量在一个CPU缓存中被修改后会立即更新主存，即一个变量的写操作会发生在后面线程的读操作之前)，无法保证线程安全性。

17.面向字符输入输出流以readerwriter为后缀，面向字节流以inputstreamOutputstream为后缀。缓冲流(buffered)会减少io操作次数但是会增大内存压力。

18.对称加密算法:DES,AES,RC2;非对称加密算法:RSA,DSA,ECC;单向散列函数加密算法:MD5,SHA。

19.null值可以转换为任何Java类类型，(String)null也是合法的，但强转后还是无效对象，只可以调用对象的static方法(static方法和类名绑定不借助对象进行访问)。

20.new对象时执行顺序:static静态代码块＞构造语句块(只有大括号圈住)＞构造方法。

21.vector和ArrayList的区别:vector支持线程的同步，即某一时刻只能由一个线程写vector，但实现同步花费很高，访问vector比较慢。

22.多线程的三种实现方式:继承thread类，实现runnable接口，实现callable接口。

23.作用域四种:public,protected,private和什么也不写的friendly,friendly只有同一类和同一包下类可以访问。

###标题###[20230716工作目标] [最后修改时间20250227] 

230716：有了工作目标才能更好、更有目的性地工作。

工作的长期目标当然是为了实现人生价值，这个是需要一生持之以恒的宗旨，要听从阿德勒哲学的教诲，把人类和社会当做一个命运共同体，将工作中遇到的人都当成自己的同伴，只有合作才能实现共赢，只有为人类社会做出贡献才能帮助后代更好的生活，周恩来总理曾说过为中华之崛起而读书，而我现在则要为人类之进步而工作。

工作的中期目标，应以一年作为一个计量单位，今年也就是2023年的目标，我要在国际结算业务上达到一个非常专业的水平，最好是无可替代，最好是代表一种权威，在所有业务人员出现业务和系统相关的问题时，想到的第一个人都应该是我，并且每次开会的时候，所有的国际结算业务问题都会求证于我，只有达到这两个具体标准才能称得上是专业。虽然现在业务人员和技术同事已经几乎是这种状态，但是其中大部分是我在这个岗位待的时间最久的缘故，时间当然是积累经验的一个很重要的因素，但是我绝不能只有这么一个优势因素，专业必须精益求精，在工作中遇到的业务问题必须要做好记录，然后一段时间做一次归纳总结，及时更新自己的知识体系，不能沽名自傲，不能固步自封，和产品人员沟通的时候要更加认真，以往经常出现的粗心大意所导致的失误实在是十分不应该，想要做到专业必须不能马虎，每一个失误都要记录下来，不要轻视任何人提出的诚恳意见。

工作中的另一个中期目标，是身兼项目经理这个职位时对整个项目的管理能力的一个把控。所谓项目管理 ，是指在一个特定期限内将各部门的资源集中起来完成某个具体项目目标的过程。所以项目目标最重要，现在我们所处的是个看重结果的时代，没有人关心项目组的某某成员在这个项目中投入了多少心血，就算要论功行赏也是必须在项目目标达成之后才会有，因此，项目组成员的个人成长只是一个锦上添花的附带目标，作为初级项目经理，我更应该关注的是项目目标能否按期完成，应该更注重向领导汇报项目情况的这个工作节点，虽然这显得很功利，但是一定要看清自己的能力，我们只有在交出了一份完整的项目验收报告之后，再去考虑能否对项目组每个成员做个人能力的提升计划。况且，个人提升是项目组成员自己更应该考虑的事情，项目经理不是学校老师，没有义务去培养所有的项目组成员，成员的自身素质和未来期望各不相同，你又怎么能去控制别人的人生规划？如果项目实施是一场团队游戏，那项目经理应该只是一名 统筹全局的辅助，而不会是一个承担主力输出职责的MVP。

###标题###[20241021 后端培训会议纪要] [最后修改时间20250227] 

afa 请求

哪里没有捕获异常需要排查

deposit_dev2uat分支开发

afa 插件：dropin 和 xsd 目录为插件目录，需要替换，或者用蒙总的 eclipse

怎么编译发布到 lt3？编译后生成 Java 类，再生成 jar 包，手动上传到 lt3。

没有捕获异常：失败节点下方没有处理分支，如果没有异常处理，前端报错为 504。需要梳理有多少场景。（504 情况找琪哥了解再梳理）

远程请求，先找基座 afa5，再到afa aibs ，aibs 再分到 OM qdzh 。

###标题###[20241016代码走读] [最后修改时间20250227] 

1002个人活期开户代码走读-唐琳侑

非柜面限额组件？1008 1010没有

入网时间公共组件？1008 1010没有用

1002 的外汇组件是否要调整成公共组件？

1002 子账户上限是否要去掉？多余通讯？

1002 调用后台服务失败，会终止交易，感叹号加 res，永远是 true。应该判断res. isSucces

1002 账号获取国别的逻辑不应该阻塞交易，国别信息属于交易后申报数据。

1002 判断未成年人是非阻断判断，不应该直接 return，否则后续判断就不会走了。

1002 海丰和惠来的默认产品类型，二代有，三代只有深圳法人才默认 10001，是否要加海丰惠来默认产品？

1002 币种改完默认产品类型，可能不触发产品类型域后事件，最好改成自动触发域后事件。

1002 客户级累积金额 3、5、7天的逻辑需要提取公共逻辑。与 20w 的存款来源必填项判断应该独立开来。

1002 的 5w 金额判断写死在代码里，未取数据库中配置。暂时不改，上线后和个人外汇组件一起改。

1002 主通讯流程未结束但是可以点❌关闭

1003设置 ic 卡信息的 appid 是否根据卡类型不同的值？看二代代码

1003 密码有三种，支付密码网银密码查询密码，测试不一样的时候有没有问题

20241018 走读1004 单位开户

1.法人判断实名有误，未考虑核心返回法人信息为空时的处理

2.单位证件 2 为空的提示信息有问题，上面是判断的证件类型。判断与提示对不上。

3.产品类型改为通过表配置

4.支票户开立后需要发售支票才能选择支付条件，因此 1004 开立支票户时支付条件为空

5.检验两次两年到期日，提交时候的检验应该去掉

6.

###标题###[20211218 工作总结] [最后修改时间20250227] 

今天开一个工作总结会。

我从来都不喜欢开会，也一直觉得开会浪费时间，黄旭应该知道，上半年夏总还在的时候我对这种会议就一直不会积极参与，一般都是以“已经这么忙了哪有时间开会”这种理由来搪塞夏总。夏总走了之后，基本上就没有什么周会和日常会议了，一部分因为我嫌麻烦我懒，一部分就是因为我觉得占用时间。

但是这段时间以来吧，我发现自己一直保持一种很忙的样子，但是问题也一直不见少，甚至越来特多，而且关键是自己的时间也没被开会这种事占用多少，是吧？除了一些需求评审这种必要的会议，其他的我一般很少去参加。

然后我想了下阿，最近好像大部分时间都是被各种各样的生产问题和测试问题占满了。

这就不得不考虑一下偶尔开一次工作总结会的必要性了。

这次总结会呢，主要是跟大家讨论一下下面几个问题。

第一个就是，总结这一周出现的生产问题，研究一下这些问题出现的原因，引以为戒，确保之后不会再出现同样的问题。这周有哪些问题呢？首先，周二晚上，我们上线了一个重要的需求版本，里面汇总了很多积压的需求改动，包括送测的和技术自测的，总共二十个左右，可以说是前所未有的数量。数量一多，出现的问题也就变多了，小问题不说，自周二之后一共出现了三个比较重要的问题。

先说影响性不是那么大的两个问题，一个是周三有两笔汇出汇款字段超长导致做不过去，总共五万美元，卡在sysjob节点，是我们当晚增加了字段长度才重跑过去的。这个字段就是报关单号，太平应该有印象吧，我们把页面的长度放开到了40，但是数据库没有放开，还是32位，然后测试也没有测极限值，就导致了这两笔生产汇款做不过去的问题，这个问题呢，原因很单纯，就是测试没做好，我也没评审好代码影响，然后开发也没有想到极限值自测，这是三个问题，我们要检讨，昱昊那边我也会去怼一怼，确实太马虎了。

昱昊和我还有另外一个生产问题，也是这周的，电子回单的改造，导致支行汇入汇款做不过去，好像有200万港币，也是因为没测到极限值，记账直接失败，还好是在交易复核通过之前报错了，改短报文附言之后才能提交过去，性质一样就没必要多说了，只能自己好好检讨。自测和测试真的很重要。

第二个问题性质不一样的生产问题，是汇出汇款收款人开户行名址超长问题，导致的结果跟上面一样，就是国结汇款做不过去，原因呢就有点不一样了，收款人开户行名址，以前取的是一个常用收款人地址字段，这个地址限长140，所以不会超过数据库里限制的160长度，但是黑名单这个需求来了，把收款人开户行名址改成了用常用收款人名称和地址拼接，这么一拼接，问题就来了，长度很容易就超过160，一下子就导致了超长阻塞交易流程。这个问题的原因看起来也是没有进行极限值测试，但是实际原因还有另一个，那就是黑名单需求改到了原有交易，还是一个最常用的交易，然后生产实际操作人也就是业务却又完全不知情，就是没有通知系统实际使用人，没有经过他们的同意就擅自改动了系统，尽管这个改动可能是正确的，也会导致与他们的操作习惯产生冲突，导致他们现在每次系统带出收款人名址之后都需要手动改一下名址。这个也是一个问题，我们以后如果有需求改动，会改动到汇款类交易的，就记得要去提醒一下申娟或者业务，让他们知道有这个需求改动和原有逻辑之间的冲突，让他们决定到底要不要改，要不要拼接，然后再去实施改造。这次我知道是有通知申娟的，但是明显业务没有收到通知，所以以后还是有必要多提醒一下，多沟通一下。确定了要改，那好，我们就改，并且做好极限值测试。

最后一个，也是最重要的，是周三全天的个人网银和手机银行汇款全部做不过去，有十九个客户大概几百万的交易做不过去，这个是周三晚上的版本紧急修复的。事情虽然已经过去了，但是我们还是有必要研究这一次问题出现的原因阿，首先，这是一个版本问题，永钦和我都有改到这个需求，个人网银剔除省份的那个需求，永钦还有印象吧？一开始是你改，后面我也一起参与进来，然后上线的时候我忘了你也参与过这档子事，就把你的版本给漏了，挺不应该的，这是这个生产问题里的第一个原因，晓宇也没抽到你的版本，原因是UAT版本号上没有这个需求的编号所以他抽不到，这是第二个原因，第三个原因呢，就是准生产的时候测试人员没有验证到这个需求，当时准生产网银连的是UAT的国结，就是这么搞笑，为什么这么草率呢，因为当时是六点部署的准生产版本，留给回归测试的时间就只有几分钟，实际上测试也只花了几分钟就验完了，连的是UAT环境嘛，很快，啪的一下就成功了，谁都很急，我急晓宇更急，少洪也在催，谁都没去看这笔交易是不是真的到了国结准生产，过程很搞笑结果很悲催，总之版本加回归的这三个原因加在一起，就导致了这个上线以来最重大的生产缺陷。

这个问题影响是最恶劣的，上到他们副行长都知道了这个生产问题，个人网银渠道的汇款，一整天做不过去一笔，就是个生产重大事故。晓宇和我，现在还在写检讨呢。不过没事，这也已经是过去式了，我们最重要的是现在和将来嘛。我们要吸取教训，这个事故反映的我们项目组最大的问题其实不是版本问题，也不是环境问题，也不是测试问题，最大的问题其实是时间安排问题，你们有没有哭的，我们每次上版基本都是赶鸭子上架，匆匆忙忙火急火燎，基本都是当天准生产验证当天走流程当天上线，其实正常流程应该是提前两天准生产验证，验证通过后提前一天走流程，再留一天时间上线的，这样的时间安排，回归测试就有至少两天，就足够充分了，那些测试问题和环境问题基本就可以避免了。而这个时间安排为什么就这么倡促？说到底就是我的问题，准确来说是我和晓宇的问题，对于工作计划，我们只是制订了一个excel，需求跟踪表，大家都有看到吧，我们制定了，并且一个个指定了需求开发负责人，但是没有真正的跟踪起来，没有每周每天的去确认开发进度，没有及时跟踪和解决那些开发中遇到的问题，让它们一直堵在那里，然后就导致我们进度卡壳，然后就是不断的错过，错过UAT打版，错过上线窗口，一次次推迟上线窗口，一次次赶鸭子上架，长此以往，其实一直都有这种隐患，只是这笔需求比较多刚好触发了而已。

这也算敲响了警钟。我们以后呢，我也很难做到每天挨个询问工作开发进度，有时候也经常忘事，所以我们就建一个微信群，每天下班的时候把自己的工作进度发在群里，还有一个重要的东西就是工作中遇到的非自身能力导致的进度卡壳问题，比如太平那个，dx不知道怎么盖章的，你就每天发在日报里，让晓宇看到，提醒他去解决这种问题。

而且通过这个群，我们互相之间也可以了解和监督彼此，我们就建这么一个群，试着把这个工作日报弄起来，看下有没有效果，我觉得一定会有效果的。

赟权那边，我觉得也是有必要发一下这个工作日报，大家每天不是在写自测案例吗，也可以让赟权帮忙测下，现在cips还没进入sit测试阶段，赟权还有时间可以帮忙测一下，有些自己可能发现不了的问题，以赟权的经验说不定一下就能发现了，总之多个人测试总是好的。赟权也可以把每天测试的东西发在群里。

开始的时候，可能会觉得效率变低了，而且最近还有ones改革，锦泳说的那一套，我觉得这些东西应该是有存在必要的，teller那边做的貌似要正规一些，我们之前更像是杂牌军野路子，这样是很容易出现问题的，而且也禁不起推敲，昨天上版流程就被他们领导打回来好几次，哎没办法，人在屋檐下不得不低头，按照他们的规范来，我们也会减少出错概率，慢就慢一点，细工出慢活嘛。先按规矩来做事，慢就慢一点。

所以这次开会的目的就是两个，一个是总结这次生产事故的原因，争取不犯同样错误。第二个是工作日报，我建个微信群，大家每天发工作需求改造进度，还有需要解决的问题，今天可以发周五的情况。要讲的就这些，大家有什么问题吗？

###标题###[开发培训记录] [最后修改时间20250227] 

20250227

后端框架讲解

刘绕兴、小琴姐、九盛、洪爷

一、 ABCapplication 核心启动类 通过扩展点加载 org.eclipse.core.runtime.application

cocktail 窗口插件

swt 初始化界面 swtuistart 加载动图

ads

外设配置

Deviceslist.xml

前端同步调用：device-manager.js 同步 http 调用 ads ads 是 go 语言编写

异步调用：vue 传了端口号就是异步，login.vue 里开始监听，在前端感觉是同步，后端实际是异步，异步接收：frame-message ，ads 异常处理机制（有无重发？）

abc 异步接收 GetAdsSocket cef publish 执行之后调用js pubjs 发送到 vue；

外设挡板 mock

ADSMockServer.java

ads 日志：ADS.properties log4j 日志

abs基于sofa ，接收 vue，转发给 afa，星盾解密和token，

csd csp 服务单位

aarm 写文件？grm 文件版本比较 md5？更新资源，aarm 监控文件资源变动，通知 message，message 通知 vue，

aase 到前端是通过 websocket ？

二、从更新 vue 资源理解资源下载原理：

初始化时 resourcesManager.java 对比 grm 对象的版本号， 进入交易时触发 reIdentifyChannelResource 方法

earlyDownResource 控制信创和 windows 不同的文件下载方式

20241230

abc5 插件开发培训

1、plugins 目录为 window 和 xc uos 共用

2、osgi 的内核

3、MAINFEST.MF 记录插件信息

4、jdk 要求最低 1.8，默认编码 utf8，eclipse 4.3.0.2 版本

5、extension  point：注册功能

6、一般需要替换的 dll：驱动更新，直接替换 dll（厂商只提供两个 dll，一个是 window 一个是 xc）

7、导出 jar 包、deploy plug and fragment

8、新增插件：复制原有的工程 plug in project，最外层文件夹规范是 ads，src 下必须有内容，一个空类也好。然后 Deviceslist.xml 里需要添加新的 category配置项。建好后需要注册 extension ，前端的 type 就是后端的 extension 。（前端调用的插件都是 command ，dll 为驱动资源，没有源码）

9、《外设接口说明文档.docx》git 上有

10、部署插件：流程配置，AARM 下 clientWorkspace ，config 目录下配置了端口，与客户端 aui.properties 中的端口相对应

11、ads 是通过 HTTPS 调用，go 语言源码

12、前端调用 abc5，先通过 cef 钩子 cefonquerychannel.java，信创是通过 socket peerchannel.java

13、日志在 client.log，会自动上传到服务器，稳定运行后改为手动上传 小琴姐改为可通过交易获取，ctrl+shift+L打开交易，输入柜员号和机构号查询，

14、p2p，utp 广播服务

###标题###[专项会议记录] [最后修改时间20250227] 

20250227

联网核查证件检验

1、1010 代办时，可以跳过代办人是否本人的检验？需要确认 1010 怎么跳过的。

2、1010 是否代理为空时，提交不能重现问题，bug097311，可能是

3、1010 是否代理选择是，应该判断资金来源支付条件是否为证件，如果为证件则要核查代办人，如果

4、1010 是否代理是经办人，提交时应判断支付条件为证件，再判断是否对资金来源方做联网核查，如已联网核查则不再触发。

5、公共部分：证件检验时用的证件信息应该是联网核查到的，而不是直接取核心的数据。

6、处罚委 违规人员清单 银监局都有记录 违规做事出问题就会罚

###标题###[案例评审记录] [最后修改时间20250227] 



###标题###[质量管理经验] [最后修改时间20250227] 

20250207 节后全体会议版本控制

1、2.13 3.17 两个上生产版本

2、分支提板图：流程：开发人员分配到缺陷，拉组长口头讨论方案，组长（乾宏 少洪 黄彬 龙哥四人）先在共享文档上登记分支内容，再从 uat 拉临时分支，再提代码，也只有四人可以合并，需要有缺陷分析报告才可以合并代码，

3、命名有要求：

4、缺陷分析报告：曾总谢总提出，从今日开始，所有缺陷都需要，

5、十五点之前缺陷要日清

6、演练安排：周日 0209 为第五轮演练 T 日，A 班上午配合

7、工单紧急程度 阻塞工单提出以后半小时要上报指挥室

8、版本未同步问题会影响绩效

20250103 逃生柜面（极端情况下只有柜面和esb和核心可用）

逃生柜面 会议

微服务挂掉后 柜面交易需支持无微服务应用 直连核心

不需要无纸化 不需要影像采集 只能纸质打印

Arqt 云下 oss 不用

只是单独一套应急柜面系统

下拉框加载 OSS json 静态文件

授权规则 星号的规则不能触发

查询所有账号信息 高端客户不能查（董事长工资）

数据库：共用生产的一套

1、补充共享文档 描述

2、上传文件到单独项目

20241223 来年工作安排

三代柜面工作安排

1、一月份前功能需求

2、一月份培训 问题收集

3、二月份演练参与

4、清明上线

5、年终总结

6、自主运维能力薄弱，生产是 sls 运维查日志，非 docker

7、缺陷流程跟进管理，现有的程序是乱序

8、李钊九盛框架研究 信创趋势 赞同为主流

9、重新分组:平台组也要处理运维组的验收监督管理职责；质量组研读交易编写文档；世勤后台文档；运维管理组新一套问题处理流程

10、一五十运维目标，一分钟发现问题，五分钟定位问题，十分钟解决问题

20241210 三代经验

三代经验

1、uat 版本控制与代码保护：uat 服务器代码其他人不可修改，防止出现版本问题。

2、代码走读：重点交易开会逐行分析代码，整理走读问题文档，改完统一送测。

3、质量整改：公共组件代码评审与优化，为技术内部优化，也需统一送测。

4、开发日报：缺陷、需求变更、文档编写、质量整改任务等的整理，方便报工和跟进任务。

5、需求登记平台：开发产品测试共用一个需求平台，abat，统一入口，只有个别产品可以修改交易需求，开发以需求为准。

###标题###[生产问题集锦] [最后修改时间20250227] 

20210807：上线检查：jdk环境、weblogic版本和配置、weblogic启动配置文件、应用用到的各文件夹是否存在及其权限、数据库配置、应用用到的host配置、网络连通性

20240425：SQL 无分号，commond 执行不会报错，但确实不会执行成功；

第四轮演练问题：

1、dateutil.compareDate 方法改动，日期为空会抛出异常，需要梳理改动影响范围，重新送测

2、仿真环境网络慢：导致柜员有菜单但是点击无反应、影像采集打开加载缓慢、进交易后一直转圈等问题，T+1 日才出现，支行验证时没问题

3、超时问题排查：先从客户端 ping 服务端（aase 的 ip），若延迟较高或直接丢包，则找网络人员（胥安泰）排查。再检查 aase 的 http.log，若不是每次请求都耗时较长，则可能是后台系统耗时长，检查报文日志表，观察具体哪笔请求耗时较长。

第五轮演练问题：

第一轮回退问题：

第六轮演练问题：

第七轮演练问题：

第二轮演练问题：

业务投产问题：

投产运维问题：

###标题###[代码走读记录] [最后修改时间20250227] 

250113:

1068 客户凭证维护&1145 &1155 外汇现钞查询维护

1、凭证状态显示隐藏：控制在 change 域后事件里，画面还原字段会和提交前不一样

2、一本通没有激活操作，只有卡才有

3、操作类型时又查了一遍全账号接口，只是为了给支付条件赋值，为冗余代码，在勾选账号时已经查过全账号接口。

250114:

1145-客户凭证状态及维护信息查询

1、客户号补零到十位，可改用公共方法。

2、日期比较超两年改用公共方法。

3、高端客户授权：是否在每次查询时都要触发授权？

4、下载凭证文件批次号，要在查询时先清空，文件下载前要判断批次号是否为空。

1155:结售汇外汇现钞查询维护

5、售汇维护界面：5000 售汇金额判断有误，变量未定义、金额判断字符串

4、

20250109 个人定期账户维护代码走读

1、转存方式的 abat 描述有变动，但未同步需求变更

2、定期存单不存在支票户，支票户查询和判断可以直接拿掉

3、提交前方法与代码检验不一致

20241224

个人活期维护代码走读

庆豪 黄彬 睿忠 鸿祥 小琴姐

1、账号组件：没有绑定关闭回调方法

2、账号组件场景码已做客户类型筛选，交易中客户类型判断多余

3、账户限额：可以用金额组件，不需要单独判断，长度也未控制

4、主提交方法：有代理人就需要上送代理标志和代理人信息

20241219 代码走读

公共组件走读

1、表格组件不支持编辑，商定为通过弹窗编辑。

2、wiki 文档的属性描述不全

3、esb 翻页模式固定用二代方式

4、返显的数据用不了picture 格式化

20241212 代码走查

公共代码走查

1、提交方法各钩子方法提炼成文档，目的是培训以后新同事开发。

2、负责内容：自办业务钩子说明文档，代码转换为文字，反欺诈钩子说明，

3、反欺诈事前事后接口文档，是否可以全输空

4、举例说明，更直观

5、费用组件优化：补零方法要改，转账账号余额与费用金额的加法要改

241127:打印方法走读

6、dm 中不得有 printinfo 变量，可能重名

7、个人外汇授权规则：个别交易是否有自写外汇授权标志？

8、总行授权流程：

9、授权柜员的手机号码查询了两次：选择柜员和点击确定时，是否冗余？

10、

241202：黑名单公共问题改造

1、超时码未从数据库获取：可能有多种且可能变化

2、1126 交易的改造需要挪到公共：blacklist-check.ts 的 check 方法

3、交易里 blacklist_auth_flag 的赋值去掉，挪到公共部分

241109：交易完成后方法

1、打印：二代是客户签字一次就好，三代是打印异常后需要客户签字，开会讨论过各有优劣。二代是交易前签名，三代是交易完成后签名。

2、打印机：串口打印机不能打印 PDF，可以还设置成 USB。中航打印机问题比较多。

3、打印生僻字：二代点距版本导致打印带章交易清单多了十几秒时间，因此回退。

4、统一签名：盖章太慢，放在统一签名盖章。

241212：消息推送流程

1、原理：客户端 abc（32 位）， 打开一个 websocket 异步长连接，发消息到服务器端口为 6171，配置在 application .yml，onmessage 为服务器有消息返回后的回调方法。（异步）

2、abc5:abc 客户端的插件，分为平台层和插件层，Abcapplication 的 start 为启动方法（点击 aui.exe 时先调用这个方法）。加载哪些插件是配置在某个 xml。

3、启动日志：client.log，plugin.xml 的 point 为 prerequisite.run 的插件都会在启动时触发。

4、websocket 通讯可通过 redis ，无 redis 则用。通过 oid 发消息。后台 afa 也是通过 oid 给 abs 给 abc 通讯。

5、cef：前端，谷歌内核，abc 调用 cef 与前端通讯。

6、aase ：端口配置项的映射。先到 aase，再到 message，aarm 是鉴权 sofa 通讯。

7、服务端：abs，springboot 工程，处理文件的插件

8、afa5:smartservice.java，发布服务时增加 lt3.public

###标题###[规范制定经验] [最后修改时间20250227] 

文档编写灵感

250112:

1、新建交易流程：可参考最近在做的 8886 交易流程，先从其它交易复制 vue 文件，再解释各个表的字段含义（菜单表、权限表、账号组件表），写好了单章文档之后，发给熟练开发确认是否无误（刘亮比较合适）

2、修订文档记录：每一点更新都要列在文档前，注明日期和操作人

3、

###标题###[项目管理经验] [最后修改时间20250227] 

电证65号文四人月归属，是否要放在总包里

gpi结项验收，问亚歌

总包合同，人力工作量270+

Cips项目经理分派:问夏总是否远程队列，时间计划安排

转人力申请框架

20220213 项目管理

项目管理事宜

报工审批	春节前后请假的是否算调休？还是都算请假？调休就不用报工了吗？

国结日常需求项目变更	国际结算二期，已经变更完成了吗？75w是最终合同金额？项目关闭日期为2023年2月，这些人日不够报工的。还是说后面会另起人力合同？ 需要咨询周总。

gpi项目结项	需要先填完完成日期再提交计划，项目列表里的实际结束日期才会出现？之后才可以选择「实施关闭」？后续需要提交多少资料？已经提交结束日期改动流程。

租房计划	填在国际结算二期里？还是cips项目里？还是新建的

cips项目变更	不够报工，以前报在cips里的日常需求人日，是不是都要迁移到国际结算二期里去？

20231102 项目经验

20231030国结线下问题总结会

多系统产品：多系统参与的需求的技术方案分析，产品无法了解所有系统的实现方式，无人统筹，只能自己开发商议。 解决方案：产品组会，开会让开发之间评估最优方案。 执行：开发人员未跟进，

新产品拓展：参考之前业务开展过程中的痛点，每一点都要列出来：比如福费廷开展前的业务准备、技术准备，需要先梳理整个福费廷过程的问题，以文档和wiki形式记录下来

《安全检测报告》优化项

原文件作为附件 这一份报告 写用什么工具

格式可以参考赵总发的

目的 哪些方面 概要 缺陷情况 严重缺陷为什么不改 影响方方面面

话术 误扫 对版本没有影响

内网系统不影响

注释不对 代码看不懂就是要改

###标题###[人物简历] [最后修改时间20240811] 

张建平：福建漳浦人，95年生，福州大学13年入学（211），沉着冷静，学习速度很快。

黄旭：武汉人，表面踏实刻苦，任劳任怨，实际加班都在玩手机被多人检举，脾气还好，对领导客气对下属发火，人品不太好，严于律人宽以待己，缺少同理心，深夜洗衣服，缺少自律力，假装学习实际刷抖音。

郑赟权：西安人，西安职业学院毕业，21年开始自考专升本，两年能拿到文凭。在上海银行被带坏变得花心，人品不错

王隽：福建厦门人、就读九江学院（与朱小军同届13年入学）、

黄军鹏：江西九江人、踏实肯干，聪明善于奉承，爱好健身运动

郭志新：xx人，89年生，单身，从上海银行调来（项目经理石俊杰），待过宁波广发和上海银行，三年经验实际水平两年左右，细心而专注细节缺少全局观，热衷挑刺不会吃亏的性格

龙江慧：湘西人，苗族，有头脑很聪明。

邢晓宇：潮汕人，很聪明，安于现状，善于推锅，原本很佛系被女友带动变得上进，女友美嘉，湖南郴州人，全校唯一五四青年。0828从福田搬家到龙华，3400两居室，花生油泼了一电梯，货拉拉司机一上午收获45工钱。

林玲：潮汕人，性格直爽泼辣；

林育妍：潮汕人，头脑灵活；

谢洁：潮汕人。

网银组：深圳农商开发人数最多部门，共60多人，分布为企业网银、个人网银、手机银行三个子部门；

柜面组：深证农商最卷部门之一，人均同时需求3到4个，对接业务部门为零售部门；

张少洪：毕业后入职深圳农商，参加工作八年有余，前面对公条线后面做teller组长，工作狂，但加班也只是为了完成任务和赚钱，并没有所谓成就感，但总体比较积极向上，比较得领导青睐，今年体会到升职加薪的真相并不是拼命加班，体会到繁杂的工作可能最后不如领导一句话带来的效益更高，曾说过以前的自己很蠢这种话；

支付组：深圳农商比较清闲的部门，人均需求数目1到2个，对接业务部门为贸融部和；

叶康论：支付系统项目经理，与晓宇同为2017年入职，一直参与支付系统开发，最初做过teller开发，少洪帮搭的teller开发环境，能力出众；

李义：进入深圳农商十几年，能力很强，支付骨干成员，当初是神州数码员工，在一代核心下做过开发，后行内开发二代支付系统后转到支付项目组工作，当时领导是叶路平，但同期同事都已升职（桂真、高伟伟），性格只适合做开发；

唐桥保：支付组成员，与吴鑫城同期入职，能力在少洪看来较为优秀一些；

吴鑫城：潮汕人，支付组成员，转到国结组工作，开发能力一般，性格较踏实，但算不上敬业，与国结产品申娟为情侣关系；

袁梦：支付组成员，后转去做新验印系统项目经理；

林烁桐：20年新人，能力较强；

陈泽翰：21年新人；

###标题###[项目管理面试题] [最后修改时间20230803] 

一、面试中可能出现的问题：

谈谈你对持续集成和持续交付的看法？

A：持续集成和交付就是通过自动技术将项目团队成员的代码频繁地集成、构建、测试和部署到生产环境的一个过程，为了达到加速环境搭建、自动化测试和发布流程，减少软件开发成本和时间、降低风险提高软件质量的目的，就会用到一些便利化流程的工具，比如用git、svn来进行代码管理，用maven来构建环境，还有用jmeter来辅助测试，还有用XX来进行一个代码扫描，最后用XX进行自动化部署，这些都是保障快速的持续集成和交付的一些工具；

谈谈敏捷开发？

敏捷开发，就是指以用户的需求变更为核心，采用迭代、循序渐进的方法进行软件开发。在敏捷开发中，软件项目在初期就被切分为多个子项目，各个子项目的成果都经过测试，具备可视可集成和可运行使用的特征，分成多个子项目之后就可以分别迭代完成对应需求开发，而且可以保证在迭代过程中软件一直处于可使用状态。宗旨是响应时间胜过遵循计划，还有就是在变化的时候尽可能保持模型的简单。金融方面的敏捷开发由于其涉及大量敏感数据和交易，因此需要多一些风险控制，包括满足业务部门、内审部门的例行检查之类，产品迭代的时候速度就会收到影响，这也是一个行业内的挑战；

什么是TDD开发方法？

TDD即测试驱动开发，通过编写测试案例来驱动程序的开发过程，是敏捷开发的一项核心实践和技术，方法就是针对每个功能点抽象出接口代码，然后编写单元测试代码。使用TDD开发方法有两个前提，一个是项目的需求必须足够清晰，而且程序员对需求也得有足够的了解；二是项目的复杂度和依赖性要比较低，如果一个业务模型极其复杂、内部模块之间的互相依赖型非常强的项目，采用TDD开发反而会得不偿失，程序员在拆分接口和写单元测试代码的时候工作量就会特别大，而且还有可能用到桥接模式，会增加程序员的工作量；（DDD：领域驱动开发，以业务为导向的软件设计方法和思路，开发前进行大量的业务知识梳理，而后到达软件设计层面，类似于整理出一个需求功能清单，最后才是开发）；

谈谈云计算模式？

云计算模式，就是将计算资源、存储资源和应用程序服务通过网络提供给用户，用户可以通过标准接口访问这些服务。采用了分布式计算技术，将计算任务分布在多个服务器上，提高了用户访问接口时的系统流畅性，同时具有动态可拓展性、高可用性灵活性，被广泛用在企业级计算、大数据处理、人工智能等领域；

了解云端的软件交付和部署方式吗？

有四种，软件即服务：直接面向客户、平台即服务：提供服务器平台或开发环境、基础设施即服务：提供操作系统和应用程序、容器即服务：提供软件运行时环境，用于构建发布运行分布式应用的平台，后三种面向开发人员；

工作中遇到的最大挑战是什么？

是想知道通过解决这个问题是否有形成规范和流程，来控制下次不会出现这样的问题；

如何制定部门或者项目目标？

要和公司战略目标紧密关联，分配目标到个人，

上级如何评价你？

结合招聘要求里的内容，挑符合的特点来说；

最有成就的一件事是什么？

一定要用实际案例来支撑，一定不能太普普通通，最好用数字来说话；

如何管理下属？

小项目组要靠感情，大项目组要靠制度，还要有一套发现、培养、激励、反馈的系统方法，比如除了每日晨会之外，要不时挑一两个最近出现问题的组员单独谈话，一开始拉拉家常谈谈最近状态，放松下来后点明主题，说明问题沟通解决方案，然后听听组员有什么反馈，有时候就能听到一些有用的反馈，比如有一次就有组员反馈我对他的管束太多了，他想要自主一点，不想事事都由我来主导，我当时点点头采纳了，回去想想也确实，不能事事都由自己当先锋，当时可能是着急，急着完成某项工作，事情完成了之后看起来皆大欢喜，但是实际上会有些打击组员的积极性。

用过哪些项目管理工具？

ones：项目管理工具，在深圳农商银行使用，用来管理需求和缺陷，还有一个wiki知识库，需求管理里又分为各种工单，比如需求细化任务、需求送测单这种，可以跟踪各个需求的生命周期，也可以统计需求下的缺陷情况，印象深刻的是ones有自定义标签页的功能，而且每一个标签页的查询条件都可以永久保存，有的时候，反而是这种小功能就特别出彩，做产品就是要做到这种细节上就，所以ones用来做项目管理十分好用，能节省很多开发成本。

禅道：在昆仑银行用过，

怎么给自己的组员评分？

首先，给组员评分，大体上可以依靠两种指标，一个是工作态度指标，一个是工作业绩指标，如果说满分是100分，那工作态度指标就占30，而工作业绩指标就占70，再分细一点，工作态度指标又可以分为日常考勤10分和工作积极性20分，业绩指标可以分为保质保量完成工作的50分，和客户满意程度的20分，这个客户满意程度可以根据是否收到客户投诉来评判，每收到一次投诉就扣10分，受到一次表彰就加10分，这100分的评分，客观事实与工作成果应该占据主导地位，里面只有工作积极性是比较依赖项目经理自己去观察感知的，如果一个员工的综合评分低于60，那么就是不合格的，公开也可以不公开也行，项目经理自己心里要有一杆秤，要有一个底线，触碰到了这个底线，可能就要采取一些措施了。

真题：CIPS每日是否会注资？注资的目的是什么？CIPS有哪几种资金类报文？

CIPS直参会每日注资，深圳农商不会但是农信银会，注资的目的是为了直参做清算，CIPS有三类资金报文：cips111单笔划转、cips112金融机构间划转和cips113批量划转

真题：CIPS直参间参各自的好处？

直参：直接对接CIPS公司的系统，所有业务都能直接开展，比较灵活；间参：不需要关注和CIPS公司之间的对接细节，专注于自身业务，但是受限于直参，自定义的需求会比较多；

真题：国际证的业务流程？

进口方，做信用证开立，出口方收到开立通知做通知登记，邮寄货物后做出口议付交单，进口方收到单据后做来单登记，然后客户通过银行的CIPS或者SWIFT渠道付款，出口方收到渠道汇款报文后做收款入客户账，完成最简单的国际证业务；

真题：做项目经理的一个工作理念？

要看项目团队的体量而定，如果是5人以下的小团体，那项目经理可能还需要承担主力开发工作，如果是5人以上，则只需要做好项目管理工作即可。项目管理工作囊括范围很大，其中包括项目计划制定、人力资源协调、与甲方业务沟通、组内能力考核、制度标准制定、人才培养等等方面；

真题：人力资源协调的方法？

可以从三方面解决人力资源欠缺的问题。第一个，是从上级领导方面，向上级领导说明现场情况，用实际数据说话，告诉领导目前项目的难处，已经到了必须增加人力才能解决问题的程度；第二个，是从内部解决问题，通过一些协调优化不合理的开发计划任务、或者是协调组员适当加班，给予组员一些福利和激烈，在内部解决问题；第三个是从甲方，与甲方协调工期，陈述目前的工期已经十分紧张，必须要砍掉一些不太重要的需求点，或者是将项目分为多个阶段上线，缓解一些人力资源和工期方面的压力，这三个方面协调并进，去找到最合适的一个解决方案。

二、自身经验之谈

1、项目管理经验：21年6月至今，两年多的项目管理经验，一开始是接手前项目经理的工作，接管了六人项目组，22年项目组扩充到七个人，23年扩充到十人，十人分别负责实现两个项目目标，一个是甲方的日常需求实现，由我直接管理其中七人的日常工作安排，另外三人则是负责甲方的另一个年度项目。我负责给这边日常需求的七人安排每周工作然后他们每天向我汇报进度，另外三人则是给他们一个季度性的时间跨度比较长的长期任务，让他们每周通过周例会的形式向我报告工作进度。

像这样两三人规模的年度项目已经做过三个，第一个年度项目是电证系统，那时候出现过和日常需求项目组人员复用的情况，开始的时候项目管理不到位，我既要负责日常需求项目组的人力资源细节项目管理，又要负责电证项目组的细节项目管理，就出现了一些比较混乱的情况。后面意识到有这个问题，第二个cips追踪器项目就不再全权负责项目组的所有细节管理了，而是把这个项目交给手下的一个开发小组长，让他去带着另外两个人开发这个功能，我只是在项目启动的时候给他们制定一个大概的项目计划，然后拉上项目涉及系统负责人召开项目启动会，确定每个重要节点的时间，后续在需求评审技术方案评审代码走查案例评审的时候把好关，然后每周参加一次小组长组织的周例会，关注一下项目进展中可能存在风险的地方，在出现问题的时候帮忙解决一下，这样就好了。这个兼职的项目组里，不需要我投入太多的精力去为每个人制定开发计划，不需要每天晨会挨个问过去进度，这样就可以专注在日常需求项目组里，专注于解决甲方业务人员提出的其他优化需求战略需求监管需求，这种比较短平快的需求就需要我把项目管理的粒度精确到天，去尽快满足甲方的日常需求就好了。

2、项目管理经验总结：通过总共四个项目组的锻炼，我学到的很重要的一个项目管理理念，就是当人的精力和时间有限的时候，要学会放权，让信得过能力强负责任的开发人员做自己的副手，通过上面说的那种方式，这样就能同时管理多个项目。而且，把自己从重复性强、可替代性强的工作中解放出来，抽离出来，把时间投入到把控项目进度全局，制定合理规章制度，培训基层开发人员，建设知识共享库，这种提升项目组整体效率的工作中来，项目经理就应该在精通专业技术和业务知识的基础上，多去做一些更重要的项目管理工作。

###标题###[国结批处理开发培训] [最后修改时间20230427] 

培训背景：

考虑到最近我们项目组来了很多新人，比如袁梦和杜钦科，这些同事刚来，都需要对深圳农商这边的国结系统有更进一步的了解，所以今天组织一个培训会，对大家以后都会用到的一些常用功能模块做一些简单的开发培训。之前已经做过接口平台的培训，不过上次会议后资料归档做的不是很好，这次会议得产出一个会议纪要，保存在知识库里，方便以后补充意见和记录知识。

不过说是培训，其实项目组里几乎所有人都开发过批处理了，批处理开发也很简单，这里先简单给大家回顾一下基本开发流程。

开发方法：从无到有开发一个批处理。

《批处理开发手册》，批处理表字段解释。

批处理特殊时间设定：比如每周六的什么时候跑一次，就在中央控制参数表里设定一个参数。

批处理开发时常遇到的一些问题：

启动问题与批处理未执行的问题，quartz缓存的重要性；

启动前修改批处理数据库连接参数：batch.properties

Cron表达式清空后整个批处理启动失败，

批处理启动日志欠缺，

国结重要的几个批处理：

收报系列批处理：mt收报批处理（通过sftp方式方式获取来报，批处理结果入临时收报表）、收报路由批处理（获取临时收报表中待处理的记录，根据国结路由规则判断应该分到哪个队列去，结果存入收报表）、自动清分批处理（获取落到待清算队列的收报，根据报文类型调用不同的清分方法实现类，最终结果入到报文池表）、自动分报批处理（获取报文池中待分报记录，通过http方式调用web端生成待办任务：根据国结分报规则赋值交易类型和所属机构）

发报系列批处理：入口是web端的国结业务交易，首先入往账表。往账批处理（获取待处理记录，做往账判重，批处理结果入发报表）、然后是发报批处理（通过sftp发报后更新发报表状态为已发报）、然后是收报批处理（对，就是刚才提到的sftp收报批处理，收到021也就是Swift回执报文，入来报临时表）、路由批处理（这次是到回执队列）、回执报文批处理（处理021报文，判断状态，往账清算，并且更新交易状态为终态-发报已确认）

强调wiki重要性，

批处理上线注意事项，

嗯，我们讲常用功能，国结这边日常需求改造主要会涉及到的三个应用就是web应用和批处理，还有一个就是gateway接口平台。

参考一下最近我们开发的日常需求，今天首先讲一下最近用的比较频繁的gateway接口平台开发流程。

虽然说我们很多人都开发过gateway的接口，但是还是要照顾一下新人，所以就从头开始讲下gateway开发流程。

内部交易码，六位数，前面两位是渠道类型，可以在国结表里查到对应码值，后四位是序号，只要在国结表里不重复就可以往后累加。

外部交易码，前面是svr  tfb，后面也有规则，按照这个TXT来。

然后就是输入输出字段。。。

这样就好了，我们执行一下这个Java类的main方法，就能得到配置文件和SQL了。

然后，哎，放到各自应该被放置的位置去。

这样一个接口的公共部分，可配置的开发部分就已经完成了。对于部分简单的接口来说，这样几分钟下来，单纯的开发工作就算是完成了一半。比如那些简单的查询接口，接下来就只需要在另外一个xml里配置一个查询SQL就好了。

不过还有一些比较复杂的接口，就需要进入到我们培训的下一个阶段，国结接口的编码部分开发。

众所周知，国结接口有两种，一种是查询类。一种是提交类。根据功能不同，我们把对应的接口实现逻辑放在了不同的配置文件里面，比如查询。。。

service配置文件，是国结里工作流的基本实现架构，一个比较核心的部分。看起来也很简单，一个一个的node节点，调完一个调下一个，可读性不错，按照这样配置一般也不会出什么岔子，除了异常回滚情况需要稍微注意一点。

接口的所有业务功能，都是在一个一个service节点里实现的。所有的，包括查询和提交。查询的，比如这种。。。

###标题###[国结接口开发培训] [最后修改时间20230313] 

培训背景：考虑到最近我们项目组来了很多新人，比如袁梦，比如杜钦科，还有到项目组才不久的张宇，这些同事刚来，都需要对深圳农商这边的国结系统有更进一步的了解，所以今天组织一个培训会，对大家以后都会用到的一些常用功能模块做一些简单的开发培训。

嗯，我们讲常用功能，国结这边日常需求改造主要会涉及到的三个应用就是web应用和批处理，还有一个就是gateway接口平台。

参考一下最近我们开发的日常需求，今天首先讲一下最近用的比较频繁的gateway接口平台开发流程。

虽然说我们很多人都开发过gateway的接口，但是还是要照顾一下新人，所以就从头开始讲下gateway开发流程。

首先，gateway接口平台是我们公司用自己的架构结合Java  nio框架做的一个通讯应用，它的作用是把web端或者batch端发出的报文转换成行内esb系统支持的格式。底层代码各位有兴趣的可以搭配网上搜索的nio技术知识研究一下，我们现在只讲怎么使用这个既成的比较完善的接口平台应用，来完成日常需求的开发工作。

开发流程，以新增一个接口为例。为了从无到有的在接口平台上新增一个接口，我们需要配置各种xml，在各种数据库表里插入记录，这里就存在一个问题。因为这接口平台用到的配置文件和数据库表实在很多，我们每次开发接口都需要添加这么多东西就太麻烦了，所以公司里就有人为此开发了一个接口生成工具，只要编辑好一个接口模板Excel，然后运行一个Java程序，程序就会自动根据模板Excel生成一系列的配置文件和insert  SQL，接下来我们要做的就是把这些配置文件放到对应的位置，把SQL放在数据库里直接执行就好了。

有了这个接口自动生成工具，接口开发就变得很方便了。

现在我给你们演示一下怎么使用接口自动生成工具，来生成这个接口平台配置文件和SQL。。。。

首先，这个是启动类，在gateway-autogen这个工程下，叫mainApp的类，代码是封装的不过都有源码，大家有兴趣可以研究一下，现在时间有限，我们只讲怎么使用工具类。

代码从git上拉下来之后，导入工程到工作空间之后，我们的这个启动类里，只有模板文件路径需要改一下。

内部交易码，六位数，前面两位是渠道类型，可以在国结表里查到对应码值，后四位是序号，只要在国结表里不重复就可以往后累加。

外部交易码，前面是svr  tfb，后面也有规则，按照这个TXT来。

然后就是输入输出字段。。。

这样就好了，我们执行一下这个Java类的main方法，就能得到配置文件和SQL了。

然后，哎，放到各自应该被放置的位置去。

这样一个接口的公共部分，可配置的开发部分就已经完成了。对于部分简单的接口来说，这样几分钟下来，单纯的开发工作就算是完成了一半。比如那些简单的查询接口，接下来就只需要在另外一个xml里配置一个查询SQL就好了。

不过还有一些比较复杂的接口，就需要进入到我们培训的下一个阶段，国结接口的编码部分开发。

众所周知，国结接口有两种，一种是查询类。一种是提交类。根据功能不同，我们把对应的接口实现逻辑放在了不同的配置文件里面，比如查询。。。

service配置文件，是国结里工作流的基本实现架构，一个比较核心的部分。看起来也很简单，一个一个的node节点，调完一个调下一个，可读性不错，按照这样配置一般也不会出什么岔子，除了异常回滚情况需要稍微注意一点。

接口的所有业务功能，都是在一个一个service节点里实现的。所有的，包括查询和提交。查询的，比如这种。。。

###标题###[国结测试环境卡顿解决方案] [最后修改时间20221201] 

1.网络波动：武汉服务器、深圳vdi，带宽不够，导致资源加载缓慢，且加载时快时慢，测试人员体验有时很卡有时还好，可能是网络波动导致；

2.硬件限制：生产上众多柜员，支行总行柜员同时几十人在线也不会很卡，白屏是内存未释放问题，需要申请增加测试服务器内存；

3.数据库经常满载：平均每周出现一次数据库内存占用满载情况，在平时可能都是临界值运行状态，会影响性能；

4.代码层面：一个是登录时加载用户岗位角色查询语句用到了多层迭代，本地调试首次登录需要加载一分钟，可以从代码层面解决冗余代码和不必要的数据库查询；第二个是交易初始化的代码和页面栏位的不必要联动事件，可以从这些方面做一个长期的代码调优，让专人负责比如建平，日常需求的优先程度就可以稍微延后，毕竟比起产品功能优化，产品的用户体验优化也是非常重要的。

###标题###[代码审核质量与上版质量] [最后修改时间20221120] 

一、代码审核

1.checklist：代码审核表的补充，收集最近几个月的UAT缺陷，分析每个缺陷的原因，分析出问题的高频位置，根据缺陷原因来补充审核项。除了代码功能性，还有代码可读性也可以提升一下，难以读懂的代码需要优化，哪些语法不鼓励甚至禁止，国结各模块代码都经常换人开发，下一个人来开发需要尽快理解之前的代码。

2.checklist：每一个审核项都需要重新评估必要性，现在很多审核项都是非必要的，起不到提醒重点的效果。比如：

二、自测案例审核

1.自测案例的审核标准：没有一个类似代码checklist的审核标准。对自测案例的要求，不需要像专业测试那样尽善尽美，但也应做到覆盖所有常用场景，容易出问题的位置也要有一些偏重。比如：每一个代码的功能点都应该有案例覆盖、重要功能点应该有反例、栏位增加和修改应该有极限值测试、发报类交易改动应完成整个流程测试、批处理测试、汇出汇款等重要交易应该有多渠道测试、多步骤的交易页面改动应该有驳回暂存步骤测试、

2.缺陷修复后应该有自测案例：一个缺陷一个案例，但是如果每个缺陷都有一个自测案例是否有些冗余？

三、需求转换为功能清单

1.经常出现漏掉需求功能点的情况，有些需求功能点描述也不是很集中，需要统一起来归集成具体的开发改造功能点，每个开发开始开发之前都会研读需求，但是读完了需求投入开发之后就可能忘记了之前研究需求的结论，需要把这些结论记录下来，一个个列在Excel表格里，有点类似于每个人现在写的TXT文档，可以帮助开发思考，也可以让其他人来观摩一下帮助思考一下有没有遗漏的需求功能点。

四、上版的质量管理

1.复盘：导致了项目启动报错或者页面明显异常的代码，必须严格复查：查清其出现的原因，是哪一行代码、哪一句SQL导致的结果，还有如此明显的问题，自测案例中为何没有出现，重大的问题、导致流程阻断的问题，需要找到关联的merge请求，把请求和bug关联起来，一段时间复盘一次最近出现重大缺陷的请求，把代码中的问题统一归纳，然后再对checklist做更新升级，以后更关注这些审核项，形成迭代。

2.feat到UAT的代码也需要审核：偶尔出现合并代码冲突的问题，导致需求功能未实现。

###标题###[工作笔记] [最后修改时间20220830] 

MIS报销流程：上传文件传不上去：重启电脑即可。

深圳农商工作笔记：

js长度判断，中文等于两位字符长度：str.replace(/[\u0391-\uFFE5]/g,"aa").length

###标题###[面试笔记] [最后修改时间20220821] 

Java基础知识：

2022/08/20 12:15 ：equals和==的区别：==是运算符，当两边是基本类型的时候，比较的是对象的值是否相等，当两边是引用数据类型的时候，比较的是内存地址；equals是方法，默认比较的是引用数据类型，比较的是内存地址，也可以重写方法，来比较值。（不过在常量池中，一个常量只会对应一个地址）

IO处理：

2022/08/21 16:15 ：XML的几种解析方式？DOM（将整个文档调入内存，支持删除、修改、重新排列等多种功能）、SAX（占用资源少、不是持久的）、DOM4j（性能优异、功能强大和极端易用）、JDOM（减少DOM、SAX的编码量）

网络知识：

Http和https差异：HTTP 属于超文本传输协议，用来在 Internet 上传送超文本，而 HTTPS 为安全超文本传输协议，在 HTTPS 基础上拥有更强的安全性，简单来说 HTTPS 是 HTTP 的安全版，是使用 TLS/SSL 加密的 HTTP 协议。

高并发socket连接的处理方式：

用过的socket框架技术：

MVC框架知识：

SpringMVC的框架原理：

SpringMVC的初始化过程：SpringFactory

SpringMVC的前后台交互过程：

Spring bean的实现原理：

Strusts的框架原理：获取配置文件内容，启动ActionFactory，

数据库知识：

Oracle：

Oracle优化查询百万：建立索引、避免null值判断、避免！=和< >操作符、避免or、能用between就不要用in、避免where后使用函数、避免对字段进行运算、，这些都会导致引擎放弃使用索引而进行全表扫描。另外用具体的字段替代*，尽量多使用数字型字段「字符型字段判断时引擎会逐个判断每一字符」。

索引哪些情况下会失效？

Mysql：

Mysql安全：避免从互联网访问MySQL数据库，确保特定主机才拥有访问特权。

通用：

数据库负载均衡：市面上有基于连接和基于批处理的两种负载均衡。前者将100个连接分别拆到两个数据库机器上，有可能某一边的请求比较频繁，会导致负载均衡失效；后者建立连接时会与每台机器都建立连接，后面针对每次请求都会用负载均衡算法选出一个数据库节点来执行请求。

持久层框架知识：

Mybatis：iBATIS一词来源于“internet”和“abatis”的组合，是一个基于Java的apache的开源持久层框架。2010年这个项目由apache software foundation迁移到了google code，并且改名为MyBatis。mybatis让程序员更关注sql本身，而不需要去关注连接的创建、statement（执行数据库操作的一个重要接口，用于在已经建立数据库连接的基础上，向数据库发送要执行的SQL语句）的创建等操作。

Mybatis：在mybatis中#和$的主要区别是：#传入的参数在SQL中显示为字符串，#方式能够很大程度防止sql注入；$传入的参数在SqL中直接显示为传入的值，$方式无法防止Sql注入。

Mybatis架构原理：mybatis框架读取全局文件和映射文件，构造出SqlSessionFactory会话工厂，工厂创建SqlSession会话，通过向SqlSession的执行器Executor输入参数来操作数据库增删改查。

hibernate：

通用知识：

ORM框架：采用元数据来描述对象与关系映射的细节，元数据一般采用XML格式存放在对象-映射文件中。

mybatis和ibatis的区别：mybatis实现了接口绑定（ibatis是在实现类中指定对应xml）；mybatis可以通过注解的方式来简化配置，但功能有限并且代码侵入性太强，要知道，ibatis乃至于ORM框架之所以流行就是因为可通过xml配置sql；Mybatis可以使用OGNL表达式简化配置；Mybatis支持“结果嵌套”，能一句sql直接将查询出来的dto对象自动封装成所需对象（不过不能支持分页因此好处有限）；

hibernate和ibatis的区别：hibernate提供了比较完整的封装，sql基本自动生成，po之间可以立体表达对象继承、聚合等关系，方便库表统一管理，开发速度很快；ibatis是一种非完全的orm框架实现方式，支持sql自定义，学习难度较低，灵活性强于hibernate，但工作量比较大。

其他面试知识：

20220104短视频收获：

面试结束后自由提问阶段：不能太过随意，也不能只从自我福利角度提问，好问题是「您进公司多少年了」了解该公司人员流动是否频道，和「优秀员工的考核标准是什么」了解上升通道和体现自己上进心，以及「公司有没有遭遇过什么重大危机最后是怎么挺过去的」了解公司是团结型还是甩锅型。

常见算法面试题：

一个桶3L容量，一个桶5L容量，怎么取到4L水：先把5L桶装满，导入3L桶中，5L桶中剩2L，再把3L桶的水倒掉，把2L水倒入3L桶，再把5L桶装满，再倒入3L桶中1L的水，5L桶中只留下4L水；

###标题###[GPI讲解会] [最后修改时间20220810] 

我看大家都来了，那我就直接开始会议啦。今天会议的主题，就是我给大家讲解一下SWIFT GPI这个产品的功能，以及它在我们国结系统的一个落地的情况，还有就是后续swift go的作用，和它可能的实现方式，当然这个具体的实现方式还是要看各位产品的细化结果了，我讲的只是一个可以用来参考的东西。

因为现在可能有人对swift不怎么了解，那我就先解释一下swift的含义，它是外国人建立的的一个专门为金融机构提供传送报文服务的公司，它实现的功能说起来很简单，就是传输各种MT格式的报文，这些报文就是银行间的交易指令。

为什么大家都用swift提供的服务呢，就是因为它安全。要想明白gpi存在的价值，就必须理解Swift报文工作机制的一个原理。举个例子，A银行和B银行都在对方行里开了账户，现在A银行的客户要给B银行的客户转一笔账，A银行先从自己客户的账号上扣了钱到B银行账户上，然后告诉B银行：我已经扣钱到你账上了，你赶紧按照我行客户的指示把钱转给你们行的客户。B银行又不傻，他也不知道这笔钱到底有没有到自己账上，他凭什么要把自己账上的钱转给行里的客户，这个已经涉及到信用问题了，如果A银行和B银行关系不熟，他们一个电话肯定扯不清这些，这个时候swift的作用就体现出来了，swift就替代了这个电话传话的功能，并且他们的报文准确程度十分可靠，全世界200多个国家1万多个金融机构都加入了这个平台，如果一个产品的受众达到了这个级别，那它本身就会成为一种权威的象征，如果是它给B银行发了一个报文，告诉B银行确实有一笔钱已经划转，那这个时候B银行就不会多想了，只要老老实实给行里客户转账就好了。所以swift最大的特点就是安全可靠。

要想理解GPI的概念，就必须要先理解这一点，就是swift传输的不是资金流，只是一种信息流，swift只是一个用来传输交易信息的平台，它本身不产生任何账务。

比如中国的张三想给美国的朋友李四1w美元，这个时候张三就会去找国内的一家银行A，让A银行汇款到美国的B银行，当然这个美国朋友李四是在B银行里开了账号的，然后A银行就会按照客户张三的指示，去给B银行汇一笔款，他们之间的通讯就是通过Swift报文，但是如果李四在B银行里没有账号，而是在一个C银行里才有账号，并且C银行在A银行里又没有自己的头寸账号，那这个时候A银行和C银行之间就必须通过一个共有的账户行来完成这个资金的清算了，这还不是最麻烦的情况，跨境汇款有时候还会出现三四个中间行的情况，而每一个中间行都有自己的一套处理来账的机制，比如我们行，在收到来账之后是需要柜员人工的去做汇入汇款交易的，既然是人工来处理，就有可能导致效率不是那么快速，如果说客户账号还有问题，或者资金不到位，或者这些中间行的行内系统啊网络啊出现问题，一笔跨境汇款耗费的时间就可能相当惊人了。

之前有机构统计过，国际间跨境汇款的平均流程时间是三到五天。这个时间在现代的客户看来完全是难以接受的，而且他们还不知道这笔汇款到了哪一个账户行，现在是流程正常呢？还是卡在了哪个银行行内系统里？同时也不知道自己这笔汇款中间会被收多少次手续费，不知道最后到交易对手里的会是多少钱。

为了提高跨境汇款的效率，同时提高跨境汇款的透明度，Swift公司在2017年就推出了Swift  gpi功能，gpi做的事情也很简单，就是给每一笔汇款打上一个唯一的标识号，类似于国内的快递系统，用标识号来追踪这笔汇款的进度和收费情况，同时规定每家银行处理汇款的时候必须要实时回复处理情况和扣费情况，用这个回复时间和准确程度作为评分标准，来给各个银行打分。

gpi这个功能相当于是一次变革，这个功能很快普及，2019年的时候Swift上的跨境交易就有百分之六十五是升级了gpi功能的了。据说现在很多跨境汇款的速度都能做到一天之内完成，甚至38%的跨境汇款能做到半小时之内到账，不过这个数字是Swift公布的，具体的提升可能问我们行的业务会比较清楚。不过她们的工作应该会更加繁忙了才对……

最后说的这个Swift  go，就是对Swift  gpi的又一个更新补丁，这次升级对汇款行和中间行的要求比较多，对于我们行现阶段的单纯收款行角色来说，改造就比较小了。针对小额汇款，就是增加了两个功能，第一个，全额入账，手续费预先就和账户行约定好，收款行不再收取手续费，改为账户行每一个周期向我们支付一次总共的费用，对于客户来说就是汇款手续费完全透明，可能涉及账户行对账单的这种费用明细要做个自动杂项记账啥的；第二个，对中间行和收款行都有限定，必须四小时之内回复确认电，gpi升级的时候是说当天来账当天必须回复确认电，这个Swift  go就更严格了。这个就更加保证了Swift汇款的时效性。

###标题###[20220630福费廷周例会一] [最后修改时间20220630] 

1、现状介绍：介绍一下项目情况，方便业务对我们的工作有一个了解，也是让大家能及时提出可能阻碍项目进度的问题，以及一些待确认的问题，我们及时发现一些风险，也就能及时做调整。

目前项目的一个情况：国内证福费廷缺陷修复版本的开发已经基本完成，第一次测试过程中也就是去年人行验收过程中发现的阻塞性缺陷已经修复，我们测试环境这边也已经陆陆续续和珠海华润银行、广州农商、农信银代理联社这边做过福费廷子系统的功能调试了，调试的内容主要是各个福费廷交易和各种福费廷系统报文，所以福费廷系统功能和报文方面的缺陷已经修复自测的差不多了，除了系统还有一些待确认的点需要后续配置，其他就只等UAT这一轮测试结束并且验收通过就可以投产了。

那我们说具体一点，说回项目上周和这周的工作：上周福费廷缺陷版本已经自测完成送测UAT，这周已经完成了线下福费廷的四个交易的功能测试，剩下的部分是线上福费廷的案例，也就是我们开发自测得比较多的电证福费廷线上交易，现在计划是七月份完成UAT测试，在7月底上线，这个时间其实是一个比较赶的时间，所以我们开发和测试目前的重心都已经放在了这次福费廷测试任务上。不过，现在经过了几轮测试，就包括去年的人行验收测试，以及之后的一轮UAT开发自测测试之后，福费廷这一块功能上应该不会再出现流程阻塞性问题，现在出现的比较多的问题，都是比如某字段没有带出来，或者页面上存在多余字段，或者需求上未明确解释的问题，我们尽量都会在一天之内修复掉比较严重的问题，需要确认的疑问也会立马在群里面提出来。保证当天问题当天解决，没有解决的也会当天找到原因给出解决方案。

项目现状就是这样子的一个情况，另外刚才不是提到有一些待确认的问题吗，我下面就讲一下，也请业务这边帮忙确认下。这几天累积下来的待确认的问题一共有四个，分别是：

2、提出待确认的问题：

第一点：福费廷提前还款，确定不用收取违约金？这个聪哥已经回复过了，保险起见还是再确认一下，这个问题关系到福费廷核心产品的配置；

第二点，就是福费廷登记的时候，可以对开证行或者买断行发一个SWIFT的自由电，现在已经有一个MT799报文，是否还需要增加MT999报文的选项？两个报文就密押关系条件有点不同，一个需要密押一个不需要；

第三个和第四个就是发现有一段时间的问题了，第三个是会计分录的问题：凡姐之前是让我们去找超萍姐确定的，我行自买的分录，超萍姐这边已经可以确定下来了，但是包买、转卖、中介的分录，超萍姐那边没有时间来分析，可能需要凡姐或者聪哥这边分析一下了。或者就是参考我们在重庆农商那边的分录来配置。

第四个问题，就是说我行自买的时候，是有一个占用客户额度的操作，就是控制这个客户最多不能做多少金额的贸易融资，这个节点操作是放在了los，那如果是从二级市场买入同业的福费廷，是不是也需要有一个占用同业额度的操作步骤？这个额度现在los是没有控制，我们在其他行也有的是放在国结系统自身，就起一个登记效果，也有的银行就没有这个同业额度控制。我们需不需要控制住这个同业额度，有没有这方面需求？

3、接下来的工作：

会计分录：今天晚上包买的要配好，明天要自测和上UAT测试，而剩下的包买转卖和中介的分录，要么按照之前在其他行的分录参考着定，要么就按照凡姐聪哥你们那边提出的分录来定，最好也是下周就把它定下来，然后尽快完成自测和UAT测试；

测试案例：需要在三周之内测完，然后在第三周的时候让业务过来验收，可能是徐雯，或者是聪哥凡姐，还是胡练？如果是徐雯验收的话，那验收时间应该控制在一周以内，业务过来验收的话，那就建议在第三周的周六来？因为之前凡姐心宇亚歌都是周六才有时间过来验收，这次应该也差不多吧。

4、询问其他人还有何疑惑或问题：

聪哥和凡姐和胡练：业务的需求；

申娟和测试：测试方面的安排是否有冲突，有问题的话我们就要去跟田燃燃哥沟通；

好，那我们这次周例会差不多到这里结束了，稍后我整一份会议纪要出来发到微信群里，然后我们就按会议上确定的内容来推进下一周的工作了。

好啦，没有其他问题的话那会议就到这里结束了，谢谢大家配合。

###标题###[奴隶社会文章读后感] [最后修改时间20220525] 

20220525：从“不敢说”到“我总结”，从“我不会”到“求拍砖”，从“憋大招”到“早请示晚汇报”，从“谁也不认识”到“我好感谢你”。——autumn

###标题###[业务知识] [最后修改时间20220314] 

国结:

三大业务类型:汇款、信用证、托收。

汇款业务：

汇出汇款：由柜面发起，可以选外币或者跨境人民币交易，交易经办后需要申报到外管局，完成交易后客户账的钱扭转到内部账，需再做一笔汇路选择交易才能把内部账里的钱转到交易对手账户（需要发送MT202报文），汇路选择时可以选择打回，流程就会回到汇出更正，此时不能修改金额和对手账号信息（只能改些无关紧要的字段）；

汇入汇款；可由柜面手工清分报文发起，也可由swift报文发起。前置交易是报文清分，汇入汇款时可选择解付（把内部账的钱转到客户账上），或者打回上级机构（把分行内部账的钱退回清算中心的内部账），或者挂账（把钱挂到清算中心挂账户内部账中）。

结售汇：以银行视角、结汇是为客户把外币结算成rmb，售汇是将外币卖给客户换取rmb，套汇则是将一种外币转换成另一种外币（无须中转为rmb）。（结售汇一般指银行对个人/机构，结售汇平盘指银行对银行）。

以银行角度，结汇时：客户的外币账号就是资金来源，也就是买入账号，客户的人民币账号则是资金去向，即是卖出账号，售汇反之。

补充：以银行为视角是结算、售出外汇，同理，以客户视角来看则可看做是结算、售出人民币，结汇业务就是把客户外汇账户里的钱转换成rmb后存到该客户的rmb账户中，售汇相反，而行内外标志则表示该rmb账户是行内还是行外的账户，如果是行内账户的话则是客户的活期存款账户，是行外的账户则会是‘资金待划款项’。

进口业务：

信用证：一种有条件的付款承诺，指银行根据进口商的指示，向出口商开具的在一定期限内，凭规定的符合信用证条款的单据，以即期或远期支付一定金额的书面承诺。

进口信用证：进口商向开证行申请，由开证行开立的信用证，开证行再将信用证寄给出口商所在地的银行(通知行)，只要出口商按照信用证上的货物要求发货，出口商倒闭了天塌下来了开证行也会把钱给进口商。流程包括信用证开立、信用证修改、撤销申请、到单登记、不符点登记、持单拒付、远期信用证承兑、到单付汇。

提货担保：

进口代付:付款方通过开证行(办理业务的银行)向代付行询价，协商一致后代付行先行付款日后付款方再将应付款项利息和相关费用还给代付行。

出口业务：

出口信用证：。流程包括信用证通知、信用证修改通知、信用证闭卷、信用证交单、预提不符点、快邮登记、出口收汇、交单闭卷、信用证转让。

光票托收：托收行根据债权人给的金融单据(汇票支票主票)或商业单据(发票提单)向境外付款人取得汇款或承兑的业务(只有金融单据就是光票托收，有商业单据则是跟单托收)。

融资业务：

出口信用证押汇：银行根据出口商申请，审核其提交的国外信誉度良好的银行所开立的信用证下全套单据，并以相应单据作为质押，按照所汇金额减去预计押汇利息和扣收押汇费用后，将押汇款项先行垫付给出口商，然后向开证行寄单索汇。

出口托收押汇：指采用托收结算方式的出口商，在提交单据委托银行代收进口商款项的同时，要求托收行先行预支部分或全部贷款，待托收款项收妥后归还银行垫款的融资方式。

信保融资：银行根据客户申请，在出口后凭客户转让的中国信保保险保单赔款权益提供的融资。

商业发票融资：出口商采用赊销、承兑交单等信用方式向进口商销售货物后，出口商将现在或将来的基于其与进口商订立的货物销售合同所产生的应收账款转让给我行，由银行提供有追索权短期融资的一种融资方式。

进口押汇：分为进口信用证押汇和进口TT押汇。信用证押汇是银行开立的信用证项下进口押汇业务。即开证行在收到信用证单据并经审核无误后，因开证申请人无法及时对外付款赎单，而应其要求由我行先行代为对外付款，提供的短期资金融通。

进口TT押汇是指采用汇款方式结算的、进口合同规定货到付款的贸易项下进口货物报关后，根据申请人的书面申请，银行向申请人提供短期资金融通，并代其对外付款的行为。

福费廷:原意丧失没收，也称包买票据或票据买断，意思是在延期付款的大型设备贸易中，出口商将经进口商承兑的期限在半年至五六年的远期汇票，无追索权地售予进口商所在的银行或大金融公司，从而提前取得现款的一种资金融通方式。利润大、风险小（银行倒闭）。分为国内福费廷和同业福费廷。		福费廷流程：买入申请--报价确认--放款--票据到期客户还款/卖出福费廷--闭卷。

保函业务：

保函：类似信用证，信用证是交易中必需品，而保函可有可无。

保理:卖方将基于现在或将来的合同产生的应收款项转让给保理商，保理商向卖方提供资金融通、买方资信评估、信用风险担保、账款催收等一系列服务的综合金融服务方式。

资金业务：

结售汇平盘：银行对银行，外币储备过多则卖给他行，少则买进。

SWIFT报文知识：

swift

报文格式

：a ----------------只表示字母、n ----------------只表示数字、[]----------------表示可省略、x ----------------swift中允许出现的任意字符(数字,字母,标点,空格键,回车键,跳行键)、d----------------表示数字或者“，”（SWIFT里数字的表示中“，”代表小数点）、2n----------------表示最多两位数字、2！n----------------表示必须两位数字、[/34X]----------------表示“/”后最多跟34个字符，“[]”表示可选项

swift报文标准：2020版本：

srg2020

﻿

PCT：百分比

pips：外汇点差

###标题###[工作中遇到的棘手问题] [最后修改时间20220314] 

国结主程序：

1、weblogic重启web包时会报错，此时再重启weblogic服务就能正常启动：

2、存量信用证包含的保证金冻结信息未迁移过来，找不到对应关系：

3、去年发生的一笔国内证交易如何迁移到新核心来？

思考：

4、IE浏览器登陆国结系统按钮点击无反应、登陆进去菜单未显示：兼容视图和可信站点都要加入国结系统的ip地址。

5、接收MT103、202、910报文后系统的处理流程，不同场景下走的流程不同，同时有三种报文时mt202和mt910为什么会绑在一起，什么情况下能解绑：

6、EJB系统新增或更改jar包后，要修改manifest文件中的classpath参数值，修改其中的jar包，否则运行时会报错（编译时并不会出错）。

7、启动项目时会报错action-mapping下必须对应action标签，但找不到是哪个xml出了错。

是param.xml中多了两个//注释符号导致。

8、返回柜面的报错信息不应该包含全堆栈的异常信息，会令柜面报错字段超长，怎么反会报错值得商榷。

9、报文处理是否能用框架。

国结信贷程序：

1、

国结打印程序：

ps:Weblogic等不能调试的服务器上，如果缺少日志就自己制造日志，在关键报错位置。

###标题###[20220207工作计划] [最后修改时间20220217] 

UAT冒烟汇入汇款退汇需求，没问题就送测：计划上午两小时完成：汇入汇款处理和汇入挂账解付两交易，阅读需求文档、造数据、做交易触发需求中的提示，若没有提示则断点前台观察是否版本问题、要么就是代码问题，如果是版本问题就让锦泳跟进，如果是代码问题则看是否好改，好改就先顺手解决，若是重大问题则告知永钦并暂不送测。尽量7号送测，永钦10号才来，少了三天测试时间，会影响进度。 ——》 5个栏位未增加，待核查本地代码历史版本中有没有 ——》本地代码历史版本中有，已改待提交svn，需要再冒烟排查 ——》

CIPS版本单审批签字并上UAT，为年前拖欠工作，可以解释说被生产数据维护耽搁（今年的客户优惠费用信息维护，测试环境没有客户数据，维护后难以测试，因此依赖人工核对数据，数据核对比较费时，大概花了一天半的时间）：计划上午半小时完成。 ——》 未及时赶上，让下午再签字

南向通问题：汇出汇款后累积金额不增反减、上下两部分的累计汇入金额不匹配（一个查的nxt额度表，一个累加的remt表中的remtAmt） ——》陈杰荣已提缺陷，待永钦修复 ——》永钦已修复

建平需求：代发工资还差20%，企业网银盖章还差盖章位置调整。 ——》本周内送测

生产缺陷：MT707生成的修改通知：次数未累加，maxAmt值为0：在本地环境看一笔修改通知，断点后台观察是否会更新dsBiz中的maxAmt值：计划下午两小时完成。 ——》排计划为本周内修复 ——》UAT已测完

生产缺陷：汇出汇款清算72w问题：本地已改代码，检查是否已上SIT，让申娟提生产缺陷转需求，尽快送测 ——》本周内送测 ——》 20220217送测

生产缺陷：汇入挂账解付退汇手续费免受后依然带入MT103报文金额中：再尝试一次重现，实在不能则另加控制。 ——》下周解决送测

生产缺陷：信用证对外付款选择不发报文但复核时看到又出现报文：尝试下暂存前为发报再打开才改为不发报的情况。 ——》下周解决送测

生产缺陷：混合付款第二笔来单后承兑和付款都找不到记录：

###标题###[统一授信会议纪要] [最后修改时间20220216] 



###标题###[刘锋_2020工作总结表] [最后修改时间20220114] 

自我评价：

今年以来，本人表现良好，在融入深圳农商项目组的同时迅速熟悉行方需求与改造代码，同时业务方面的知识也不断在增进。经过这段时间的工作，我了解到每个国结系统项目的难点都在于业务层面，希望我能尽早掌握国际结算的所有业务知识。

本人适应新环境能力较强，加之项目组内氛围融洽，因此十分适应现在的工作环境。

本人吃苦耐劳，对项目内加班安排都十分服从，并且也完全在承受范围内。

明年的发展计划：

顺利完成深圳农商项目的需求改造与后期维护，同时尽可能多的学习国结业务知识，以业务知识构建国际结算完整知识体系，将知识面逐步扩展到金融行业其它派系。

多锻炼口头表达能力，多汇报工作，开口前三思，说话时就要条理清晰言而有据。争取早日达到理解多少就能表达多少的程度。

工作总结包含的内容：

深圳农商项目组工作：

1、参与需求文档编写，整合需求涉及国结交易，梳理改动接口，整理系统上线方案并参与行方上线和运维流程；

2、按需求改造国结系统的功能和接口，与行内各系统进行磋商并联调，配合业务人员进行相关测试，在此过程中尽可能多的学习到了以下专业知识：

①贸易融资模块改造：熟悉了贸易融资、福费廷、进口代付等国际融资业务的相关知识，了解了银行对于融资贸易的风险管控措施和授信额度控制，主导了行内国结系统与LOS信贷系统间的接口开发与联调。

②跨浏览器版本合并：为使国结系统兼容谷歌浏览器，合并了公司给出的跨浏览器版本代码，对产品的前台代码进行了一次全面的改造。本人投身其中，花费了不少时间和精力，向多位前辈请教了相关知识，充分学习了web前台开发技术，弥补了自己前台开发经验的不足。

③国内证模块改造：继去年昆仑银行电证项目之后，再次使用到国内证业务的相关知识。首先在公司的版本上加以改造，并修复了许多技术缺陷，然后在合并代码进项目组版本之后，继续配合测试，并解答行方业务人员疑问，再按照行方需求，针对性地改造了一些国内证相关功能。以确保国内证模块与电子信用证报文体系能够在产品上正常运行。

④汇款模块改造：了解并熟悉了国际汇款这种结算方式。相对国际信用证和托收结算，汇款业务流程简单、手续费低，是银行之间最常使用的结算方式。通过了解需求和咨询前辈，进一步理解了汇款的各个流程节点，并主导开发了柜面与国结之间的汇款功能。

⑤清算模块改造：主要以汇入汇款头寸电为切入点，以其他SWIFT报文为辅助，逐渐熟悉了清算系统的一套处理逻辑，了解了从前置系统接收到swift报文到最后汇款入客户账的报文处理流程，通过深入熟读代码和进行开发改造的方式进一步理解了系统中各个节点对于报文的处理方式，逐步体会到前辈们开发时每行代码的用意，从而学习到架构与改造系统时的思想理念。

3.工作中不懂的地方花业余时间弄清楚，在工作没有任何问题的基础上学习新技术与新知识；

###标题###[刘锋_2021工作总结表] [最后修改时间20220114] 

自我评价：

今年以来，本人表现良好，在升任为深圳农商驻场项目经理的同时熟悉了行方需求的整体流程，并加强了与行方各部门的人际关系联络。系统技术业务方面知识不断增进，项目管理能力也在充分锻炼中迅速提升，与此同时，在不断地与行方公司方双向沟通的过程中，通过共情能力与换位思考，逐步体会到双方的需求点与之间存在的矛盾。自身的语言沟通能力与表达能力也得到了空前的成长。

明年的发展计划：

顺利完成深圳农商行方制定的国结四个年度项目：CIPS改造、SWIFT ISO20022升级、电证福费廷项目上线运维与后续改造、国结便利化与线上化需求改造（国结日常需求）；

同时尽可能多的补充国结业务知识，以业务知识完善国际结算完整知识体系，尽量做到知识面覆盖深圳农商所有生产问题，并将知识面逐步扩展到其他系统。

工作总结包含的内容：

深圳农商项目组工作：

在今年逐步走上了从开发组长到项目经理的转型道路，基本摆脱了只用闷头开发的工作模式，开始了解识人并用人所长的重要性，开始了解到工作计划的必要性，一般来看，用于制定工作计划的时间越多，工作计划的执行时间就会越少。这两个时间之间存在极大的相关性，就看自己愿意怎么做。是愿意多花一些时间在计划细节上下功夫，还是愿意多花一些时间去解决因计划疏忽而导致的反复纠缠？

工作计划的制定，大到电证福费廷开发计划，小到SQL注入修复计划，都需要考虑一些必要的内容。比如做什么、不做什么、先做什么、后做什么、粗做什么、细做什么、资源如何分配、特殊情况如何补救等等，都要依据实际情形计划周密。没有周密的切实的工作计划，要很好地完成一件工作几乎是不可能的。工作计划制定这方面我只是管中窥豹，只是初步了解到其重要性，并未制定执行过十分高效的工作计划，这半年来经验一直在积攒，相信明年能做得更好。

2、了解到行方技术部门的根本需求是满足业务部门的需要，而技术部门领导看重的是结果而不是人情，所幸是深圳农商业务部门各位业务人员性格都属于比较好沟通的类型。但好沟通这一点并不是拖延业务需求的资本，做日常需求和年度项目时若要排出需求优先级，业务人员的意愿将是首先要考量的标准，第二个要考虑的才是技术部门自身系统升级的紧急程度，而且对于技术部门而言，业务人员所提出的日常需求的解决速度是国结运维的一个重要考核标准，解决速度若是太慢，譬如二月份的需求拖到了十月份，那即使业务部门不会投诉，技术部门领导自然也会找上门来。

这一年来，由于GPI、电证、福费廷需求接踵而至，业务的日常需求被积压太多，导致行方技术业务两个部门都产生意见。因此最后一个季度我们在尽力集中解决需求，最后年底剩余的数量维持在了二十多个，这个数量在行内属于中规中矩，从积压太多到解决大半，效果十分明显，行内两部门也变得容易沟通起来，顺畅沟通的前提条件是满足关键人物的需求。还有一点，如果紧急的需求得到及时解决，那即使不重要的需求三五个月没有解决，局面也不会变得特别难堪，所以要分清主次，并及时了解在途需求的紧急程度。

3、身为项目经理至关重要的一点是以身作则，自己是同事最好的榜样。经理迟到，则员工迟到；经理懈怠，则员工懈怠，团队风气由领头人养成，要想团队效率高，必须先从自己身上找原因。同事是自己最好的一面镜子，从某些同事身上，我看到了自己的勤恳敬业，从另一些同事身上，则是看到了自己的懒惰散漫。希望自己能尽快改掉这些缺点，并发扬自己的优点。

4、完成分内的工作任务并不难，但完成整体的、严苛的工作任务需要很大的毅力，很多时候支撑我走下去的不是薪酬与房贷，而是想把系统做好的使命感与身在此处的责任感，我觉得这些感觉与工作经验一样重要。

5、承担更多的责任意味着更多的风险，做出坚定的决定需要十分的勇气，人需要对自己说的每一句话负责，管理人员更是如此，我需要记住每一个承诺，更需要在每次承诺前思考是否要做出承诺。这一年来，在拒绝人这方面，我的水准着实是短板，死要面子活受罪，希望明年能时刻记住这一点。

###标题###[SVN] [最后修改时间20200515] 

创建资源库url报错：请求的名称有效，但是找不到请求的类型的数据。

可能url中间有空格，或者编码不对。（编码不对复制到ue里再复制出来即可）。

###标题###[国结系统问题] [最后修改时间20200409] 

启动报错：Failed to invoke Servlet 2.5 getContextPath method：更新servlet-api-2.5.jar，重启。或直接clean项目，重启。

###标题###[业务问题] [最后修改时间20200107] 

买方证：索偿登记和到单登记是否可以都从开立发起

买方证：无偿放单和退单和拒付的差异

融资：押汇放款利息收取方式为现收时，是否放款即收利息

信开的信用证后续都不用发报。

已承兑的来单做来单闭卷是否需要转分录回远期「已承兑表外转成远期」。

###标题###[pmis页面加载不出查询结果] [最后修改时间20191009] 

Resultslist配错，或者其他参数有误。

Maven update后install报同样的错，update时勾选强制更新。

报错 the last packet sent successfully to the server was milliseconds ago：检查url后接的参数。

###标题###[工作笔记「农信银」] [最后修改时间20190923] 

MySQL8.0连接URL中不能有characterEncoding，否则无报错但连接不上。

###标题###[工作笔记「2」] [最后修改时间20190906] 

面函：

1、IREPORT中DETAIL与COLUMNFOOTER、PAGEFOOTER、LASTPAGEFOOTER之间无缝连接：先将报表属性中的More选项卡中的Floating Column Footer选项选中，

再将Summary区域的高度设为0，Column Footer就会紧挨着Detail区域下方显示了。这是Jasper的布局问题

2、detail直接分页：组件面板-》break

网银：

1、jsp之间以url传String值需encodeURIComponent（encodeURIComponent（字符变量））转成URI组件，接收端以URLDecoder.decode（URLDecoder.decode（字符变量））再转为字符。

2、网银渠道发起的交易，一部分在国结经办复核，一部分在柜面处理（处理后提交到国结，如汇出汇款、同名划转、机构内汇划）。

3、删除和废弃的区别：删除后会重新发起一笔新任务。

###标题###[工作知识「1」] [最后修改时间20190604] 

申报：不能连续报两次新增，申报无误报新增是因为前一笔外管局报错了。

申报：已申报删除只用报一个基础信息的删除即可，未申报删除即删数据。

申报：补录时基础信息不要有任何改动。

日志：打印出每一步柜员的操作，打印接收的报文前不应对报文有任何操作。

代码：空指针需规避。最后一个else记得补。改完公共代码一定回归。单元自测非常重要。

外管局：七点到二十三点开放时间。

福费廷：大多是依托远期信用证的票据买卖，出口方拿到票据后想立即拿钱，经进口方同意后直接把票据卖给银行。

复合优于继承：在新类中增加一个私有域引用现有类的一个实例，这种设计为复合，新类即包装类，包装类中每个实例方法都可以调用被包含的现有类实例方法，这被称为转发。只有当子类真正是超类的子类型时才适合用继承。复合不会违背封装原则，也不会继承原有类中的缺陷。「接口优于抽象类，通过骨架实现类可以结合接口和抽象类优点。」

不要在父类的构造器中调用可被覆盖的方法。

Java按位异或符：^，将两个数转化为二进制后逐位比较，两个相同则为0，不同则为1，然后重新转为十进制。

Win7只搜索文件名称：前面加「名称：」

事务控制：spring和ejb等框架都交由框架控制「通过修改配置参数更换方式」，c语言则是自己写每一个事务获取or提交处。

线程join方法：主线程中调用A线程的join方法，相当于加了一个同步代码块，相当于调用了主线程的wait方法，主线程会等A线程执行完后再被激活。该方法也可传时间参数。

###标题###[311开发计划] [最后修改时间20180311] 

剩余三周十五天。剩余工作：核心记账及结售汇七接口、汇款相关接口、结售汇相关接口、个人结售汇新增交易、申报相关接口、信贷接口、ECIF接口，共七大块任务，即每一块任务消耗的时间应在2天之内。不过接口的许多东西能够复用，例如公共的报文头里只有些许字段取值不同、所有报文的加密方式应该一致，而且汇款及申报接口已经开发了百分之七十左右。

三周时间。第一周第一天必须完成核心记账接口的开发。首先，各个字段的含义须弄懂，通讯报文头及业务报文头的字段也是，现有旧记账接口的字段务必保留到新接口，新接口的不同点务必全部找到。其次，加密的算法逻辑必须弄懂，要按照核心标准文档的加密流程来做，加密的工具包与方法需要了解清楚，加密的方式也不能有误（全报文加密还是body体加密）。第一天必须使系统内产生出完成加密的记账报文！可以直接用汇出汇款的交易来先做测试。

第一周的前三天：核心记账及结售汇七接口务必完成开发，其中核心记账接口最为重要，关系到之后所有的接口开发。第一周后两天可以将申报接口、汇款接口与核心记账接口串联起来，周五必须能走完一个完整的正常汇款流程（交易列表查询接口》申报信息接口》汇款信息接口》核心记账接口》打印接口）。

第二周进行结售汇相关开发，包括新增个人结售汇交易、对公对私结售汇接口开发、结售汇到核心七接口检查与修改，总之结果是必须能走完一个完整的正常个人结售汇流程。（个人结售汇流程比较复杂，其中涉及到到个人结售汇平台的三支接口开发——登记额度、连接超时查询登记状态、记账失败撤销登记三接口。）

第三周进行剩下的信贷接口和ECIF接口开发，如果前两周的开发任务没有问题，那积累下来的接口开发经验和可复用代码就会很多，到这里的开发难度应该没那么大，不过信贷又是另一个系统，而且上两周的开发结果也肯定需要时常改动，这周压力同样不容乐观。

不能走神！不能发呆！不能摸鱼！不要操心其他人的事！厕所不能上太久！不能晚睡！不能拖延！不能怕麻烦！积极面对问题！工作期间全力以赴！

###标题###[接口整理笔记] [最后修改时间20180311] 

国结到核心接口：

1、正常记账：

AcctListManagerEJB类sendAcctInf方法，逻辑：传入交易流水号和交易类型编号，根据流水号查询BU_TransactionTmp（业务交易临时表）获取公共业务信息，根据流水号查询BU_AcctListTmp（查询会计分录临时表）和BU_SpfeDetailTmp（结售汇明细统计临时表）获取相应信息，如果两个表里都查不到数据并且交易类型不是进口开证闭卷或保函闭卷则只发送报文头 -> 如果交易类型是汇出汇款，则根据流水号查询NT_OUTWARDREMITTMP（汇出款项临时表），如果查到记录且是对私汇出汇款（remitObject字段不为0则是对私），则获取其CorpSaleNo字段值（对私汇款销账帐号）存入返回报文头 -> 如果交易类型是保函/备用证赔付，则根据流水号查询IM_LGPAYMENTTMP（保函/备用信用证付汇临时信息）表，如果有数据再根据查到数据里的LGNo保函号码去查询IM_LGISSUEINFO（保函/备用信用证开立信息）表，如果是对私保函（LGObject字段不为0），则获取前面查到数据里的CorpSaleNo字段（对私汇款销账帐号）存入报文头 -> 如果交易类型是进口押汇归还，则根据流水号查询BU_LOANREPAYTMP（贷款回款临时表），如果查到数据再根据其中贷款业务编号查询BU_LOANINFO（贷款详细信息表），如果上一个查询查到还本金额为0，则将这次查询到的loanAccount（贷款账号）存入报文头，（获取贷款账号、货币及金额，再根据这些调用核心接口查询利息(此条逻辑20150603废除)） -> 如果交易类型是拆借登记或结售汇平盘登记，则根据流水号查询fi_RemoteExchangeTmp（远期结售汇临时表），获取结果集中tradeKind（交易类型）存入报文头 -> 根据公共业务信息里的客户编号查询PA_Crop（客户表），获取mainCorpNo（核心系统编号）存入报文头 -> 如果交易类型是资金存放/拆借起息/到期发送合同号/进口开证/开证修改/来单付汇/保证金购汇/开证闭卷则将公共业务信息的PrimaryBizNo(主业务号)存入报文头，否则存CurrentBizNo(当前业务号) -> 如果业务类型是进口开证、到单付汇、保证金购汇、进口信用证闭卷，据流水号查询IM_LCIssueTmpInfo（开证信息临时表），如果没数据再根据公共业务信息的PrimaryBizNo（主业务号）查询IM_LCIssueInfo（开证信息表），如果查不到开证信息则去查保函开立信息，先跟据流水号查询IM_LGISSUETMP（保函信息临时表），查不到数据再根据公共信息主业务号查IM_LGISSUEINFO（保函/备用信用证开立信息表），查询完成后再视查询结果（信用证或者保函）取其中的depositPct字段（信用证或者保函的保证金比例）存入报文头 ->  如果业务类型是进口开证、到单付汇、保证金购汇、进口信用证闭卷，则根据流水号查询BU_DepUsedTmp（保证金使用明细临时表），查不到再查BU_DepUsed（保证金核心使用明细表），再查不到则根据公共业务信息的主业务号（PrimaryBizNo）查询BU_DepUsed（保证金核心使用明细表），查到信息后将保证金币种、余额、账户字段存入报文头。

###标题###[至恒融信工作笔记] [最后修改时间20180221] 

ORACLE安装：impdp导入时新建逻辑目录后，需要在相应位置手动新建实体目录，否则报错：“ORA-06512: 在 "SYS.UTL_FILE", line 536”。

jboss及项目配置：

jboss启动run.bat一闪而过：放在cmd中运行可以看到报错信息。

修改D:\jboss4.02\bin\run.bat中JAVA_HOME；

修改D:\jboss4.02\server\default\conf\jboss-service.xml中两项目位置；

修改D:\jboss4.02\server\default\deploy\oracle-xa-ds.xml中数据库参数；

修改ebills.workflow.jar下ebills.workflow.jar\com\general\wf\util\wfconfig.properties中JMS_PORT为2100

eclipse：

ant build.xml时报错“Could not create the Java Virtual Machine”：java堆内存不足以运行JVM，eclipsejdk给的内存最大值太大，改小即可；ant build.xml时报错“Specified VM install not found”：更新jre前的eclipse缓存未清除，删除项目目录下\.metadata\.plugins\org.eclipse.debug.core\.launches文件夹中的所有文件，重启eclipse，ok。

ant编译项目报错：java heap space，can be done by defining ANT_OPTS=-xmx640m，增大eclipse中jdk的jvm占用内存上限即可。

Excel：自动调整单元格大小勾选‘自动换行’即可；勾选后如果单元格上方空出一行调小字体即可。

修改JAVA_HOME无效，java-version保持不变：可能是某软件把jdk装在了C:/windows/system32下，修改环境变量的Path，将%JAVA_HOME%\bin放在最前面即可优先选择JAVA_HOME下的jdk版本。但此方法仍不能改变控制面板-Java-runtime Environment版本（IE浏览器application使用版本），只有卸载装在system32下的jdk才能切换回JAVA_HOME里的jdk。

面函查看：控制面板java-高级-安全-混合代码-禁用验证，jdk1.6（ie、eclipse、编译项目用的jdk需版本位数一致）

D:\MyWork\ebills.web_SVN\src\java\com\amerisia\ebills\chat\action\ChatAction.java:7: 软件包 javax.servlet.http 不存在 : dir.xml中name="ebills.core.dir"的变量值指向core项目，当core项目名不对应时编译报错。



